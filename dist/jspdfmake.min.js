"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function JsPDFMake(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.docDefinition=e;var n={orientation:"p",unit:"pt",format:"a4",hotfixes:[],lineHeight:DEFAULT_LINE_HEIGHT};this.options=_extends({},i),this.doc=new JsPDF(n).setProperties({title:t}),this.title=t,this.pageWidth=this.doc.internal.pageSize.getWidth(),this.pageHeight=this.doc.internal.pageSize.getHeight(),this.pageMarginLeft=i.pageMarginLeft||0,this.pageMarginRight=i.pageMarginRight||0,this.pageMarginTop=i.pageMarginTop||0,this.pageMarginBottom=i.pageMarginBottom||0,this.maxLineWidth=this.pageWidth-this.pageMarginLeft-this.pageMarginRight,this.tocSections={},this.generateFromDocDefinition()}function extendJsPDFAPI(t){t(JsPDF.API)}Object.defineProperty(exports,"__esModule",{value:!0});var JsPDF=_interopDefault(require("jspdf")),DEFAULT_FONT_SIZE=18,DEFAULT_LINE_HEIGHT=1,DEFAULT_ALIGN="left",DEFAULT_FONT_NAME="helvetica",DEFAULT_FONT_STYLE="normal",DEFAULT_TEXT_COLOR="black",_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},slicedToArray=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.reverse=function(){return this.split("").reverse().join("")};var EPS=1e-5,lessThanOrEqual=function(t,e){return t<e||Math.abs(t-e)<EPS},removeCharactersToFitWidth=function(t,e,i,n){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:" ",o=Array(i).fill(".").join("").concat(r),a=e-n(o),s="",c=0;c<t.length&&lessThanOrEqual(n(s.concat(t[c],o)),a);)s=s.concat(t[c]),c+=1;return s=s.concat(o)},addDotsToFitWidth=function(t,e,i){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"  ",r=t;lessThanOrEqual(i(r.concat(".",n)),e);)r=r.concat(".");return r.concat(n)},connectWithDotsToFitLine=function(t,e){var i=Array(9).fill(".").join("").concat(t.linkPage),n=e(i),r=e(t.text),o=t.text,a=i;return t.lineWidth-r<n?o=removeCharactersToFitWidth(t.text,t.lineWidth-n,2,e):a=addDotsToFitWidth(i.reverse(),t.lineWidth-r,e).reverse(),[_extends({},t,{text:o}),_extends({},t,{text:a,xOffset:t.xOffset+t.lineWidth-e(a)})]};JsPDFMake.prototype.initTOC=function(){var t=this;this.tocSections={},this.docDefinition.content.filter(function(t){return t.toc}).forEach(function(e){var i=e.toc;if(t.tocSections[i.id])throw new Error("Duplicate table of contents id '"+i.id+"', please make sure all table of contents have a uniq id");var n=Object.assign({},i);delete n.id,t.tocSections[i.id]={items:[],options:n}})},JsPDFMake.prototype.transformTOCToContent=function(t){var e=t.options,i=t.items,n=[e.title];return i.forEach(function(t){var i=t.title,r=t.paragraphIndex,o=Object.assign({text:i,isLink:!0,linkParagraphIndex:r},e.itemOptions);n.push(o)}),n},JsPDFMake.prototype.updateTOCLinks=function(t){var e=this,i=0,n=0;return t.forEach(function(t){var r=0;t.isToc?(t.lines.forEach(function(i,o){r=i.pageNumber,i.pageNumber+=n,0===o&&(e.tocSections[t.id].pageNumber=i.pageNumber)}),i+=r):t.lines.forEach(function(t){t.pageNumber+=i,n=t.pageNumber})}),t.forEach(function(i){i.lines=i.lines.reduce(function(i,n){if(n.linkParagraphIndex>=0){var r=connectWithDotsToFitLine(_extends({},n,{linkPage:t[n.linkParagraphIndex].lines[0].pageNumber}),function(t){return e.doc.setFont(n.fontName,n.fontStyle).setFontSize(n.fontSize).getTextWidth(t)});return i.concat(r)}return i.concat(n)},[])}),t},JsPDFMake.prototype.size=function(){return this.doc.internal.pages.length-1},JsPDFMake.prototype.addPage=function(){var t=this.doc,e=this.getCurrentPageNumber();e===this.size()?t.addPage():t.insertPage(e)},JsPDFMake.prototype.clearDoc=function(){for(var t=this.doc;t.internal.pages.length>1;)t.deletePage(1);this.addPage()},JsPDFMake.prototype.updateDocDefinition=function(t){this.docDefinition=t,this.generateFromDocDefinition()},JsPDFMake.prototype.getCurrentPageNumber=function(){return this.doc.internal.pages[1]&&this.doc.internal.getCurrentPageInfo().pageNumber||0},JsPDFMake.prototype.isCursorOutOfPageVertically=function(t){return t>this.pageHeight-this.pageMarginBottom},JsPDFMake.prototype.drawTextInLine=function(t){var e=t.text,i=t.fontSize,n=t.fontName,r=t.fontStyle,o=t.textColor,a=t.lineWidth,s=t.xOffset,c=t.yOffset,h=t.pageNumber,l=t.maxFontSize,f=t.isLink,g=t.linkPage,p=t.linkUrl,u=t.hasBullet,d=t.bulletSpacing,P=t.highlightColor,T=this.doc,v=i/2+i/4;if(P&&(T.setDrawColor(0),T.setFillColor(P[0],P[1],P[2]),T.rect(s,c,a,i,"F")),T.setPage(h).setFont(n,r).setFontSize(i).setTextColor(o),f){var D={pageNumber:g};p&&(D={url:p}),T.textWithLink(e,s,v+Math.max(i,l)-i+c,D)}else T.text(s,v+Math.max(i,l)-i+c,e);return u&&(T.setDrawColor(0),T.setFillColor(0,0,0),T.circle(s-d,c+v/1.8,i/7,"FD")),!0},JsPDFMake.prototype.drawParagraphs=function(t){var e=this;t.forEach(function(t){var i=t.lines;return(void 0===i?[]:i).forEach(function(t){for(;t.pageNumber>e.size();)e.addPage();e.drawTextInLine(t)})})},JsPDFMake.prototype.escapeSpecialCharacters=function(t){return t.replace(/[^A-Za-z 0-9 \n\t\.,\?""!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~]*/g,"")},JsPDFMake.prototype.renderParagraph=function(t,e,i,n,r){var o=t.text,a=t.pageBreak,s=void 0===a?"none":a,c=t.fontSize,h=void 0===c?DEFAULT_FONT_SIZE:c,l=t.fontName,f=void 0===l?DEFAULT_FONT_NAME:l,g=t.fontStyle,p=void 0===g?DEFAULT_FONT_STYLE:g,u=t.textColor,d=void 0===u?DEFAULT_TEXT_COLOR:u,P=t.align,T=void 0===P?DEFAULT_ALIGN:P,v=t.marginTop,D=void 0===v?0:v,F=t.marginRight,x=void 0===F?0:F,m=t.marginBottom,y=void 0===m?0:m,O=t.marginLeft,k=void 0===O?0:O,E=t.tocIds,M=void 0===E?[]:E,S=t.tocItemText,b=t.isLink,L=void 0!==b&&b,C=t.linkPage,_=t.linkUrl,N=t.linkParagraphIndex,A=t.hasBullet,J=void 0!==A&&A,I=t.bulletSpacing,w=void 0===I?h:I,W=t.highlightColor,z=void 0!==W&&W,U=this,j=arguments.length>5&&void 0!==arguments[5]&&arguments[5],H=this.doc,B=this.maxLineWidth,R=this.tocSections,q=this.pageMarginLeft,X=this.pageMarginRight,Y=this.pageMarginTop,G=this.pageWidth;if("string"!=typeof o)return console.warn("Text is only supported as string format, this section will not be rendered => "+o),{nextXOffset:e,nextYOffset:i,nextPage:n,lines:Z};("before"===s||this.isCursorOutOfPageVertically(i+h))&&(i=Y,n+=1),M.forEach(function(t){if(!R[t])throw new Error("Unknown table of contents id '"+t+"'");R[t].items.push({title:S||o,paragraphIndex:r})}),J&&(k+=w);var V=H.setFont(f,p).setFontSize(h).setTextColor(d).splitTextToSize(this.escapeSpecialCharacters(o),B-k-x);j&&(V=V.splice(0,j)),i+=D;var Z=[];return V.forEach(function(t,r){U.isCursorOutOfPageVertically(i+h)&&(i=Y,n+=1),e=q+k,"center"===T?e=G/2-H.getTextWidth(t)/2+k-x:"right"===T&&(e=G-H.getTextWidth(t)-X-x),Z.push({text:t,fontSize:h,fontName:f,fontStyle:p,textColor:d,lineWidth:G-X-x-q-k,xOffset:e,yOffset:i,pageNumber:n,maxFontSize:h,isLink:L,linkPage:C,linkUrl:_,linkParagraphIndex:N,hasBullet:0===r&&J,bulletSpacing:w,highlightColor:z}),i+=h}),i+=y,"after"===s&&(i=Y,n+=1),{nextXOffset:e,nextYOffset:i,nextPage:n,lines:Z}},JsPDFMake.prototype.transformContentToDrawableParagraphs=function(t,e){var i=this,n=this.pageMarginTop,r=void 0,o=1;return t.map(function(a,s){if(a.toc)return o>1&&s<t.length-1&&(o+=1,n=i.pageMarginTop),{isToc:!0,id:a.toc.id};var c=i.renderParagraph(a,r,n,o,s,e),h=c.nextXOffset,l=c.nextYOffset,f=c.nextPage,g=c.lines;return n=l,r=h,o=f,{lines:g}}).filter(function(t){return t})},JsPDFMake.prototype.generateFromDocDefinition=function(){var t=this,e=this.docDefinition;this.clearDoc(),this.initTOC();var i=this.transformContentToDrawableParagraphs(e.content),n=this.tocSections;Object.entries(n).forEach(function(e){var n=slicedToArray(e,2),r=n[0],o=n[1],a=t.transformTOCToContent(o),s=t.transformContentToDrawableParagraphs(a,1);i.forEach(function(t){t.isToc&&t.id===r&&(t.lines=s.map(function(t){return t.lines}).flat())})}),this.drawParagraphs(this.updateTOCLinks(i)),this.renderStampToPages()},JsPDFMake.prototype.renderStampToPages=function(){var t=this.docDefinition,e=this.doc,i=this.tocSections,n=this.pageWidth,r=this.pageHeight,o=t.renderStamp,a=t.renderFooter;if(a&&(console.warn("Depricated usage renderFooter, use renderStamp instead"),o=a),o)for(var s=1;s<=this.size();)e.setPage(s),o(e,s,{width:n,height:r},i),s+=1},JsPDFMake.prototype.download=function(){this.doc.save(this.title)},exports.JsPDFMake=JsPDFMake,exports.extendJsPDFAPI=extendJsPDFAPI;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyIsIi4uL3NyYy9jb25zdGFudHMuanMiLCIuLi9zcmMvdXRpbHMuanMiLCIuLi9zcmMvdG9jLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKc1BERiBmcm9tICdqc3BkZic7XG5pbXBvcnQge1xuICBERUZBVUxUX0xJTkVfSEVJR0hULFxuICBERUZBVUxUX0FMSUdOLFxuICBERUZBVUxUX0ZPTlRfU0laRSxcbiAgREVGQVVMVF9GT05UX05BTUUsXG4gIERFRkFVTFRfRk9OVF9TVFlMRSxcbiAgREVGQVVMVF9URVhUX0NPTE9SXG59IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCAnLi90b2MnO1xuXG5leHBvcnQgZnVuY3Rpb24gSnNQREZNYWtlKHRpdGxlLCBkb2NEZWZpbml0aW9uLCBvcHRpb25zID0ge30pIHtcbiAgdGhpcy5kb2NEZWZpbml0aW9uID0gZG9jRGVmaW5pdGlvbjtcbiAgY29uc3QganNQZGZPcHRpb25zID0ge1xuICAgIG9yaWVudGF0aW9uOiAncCcsXG4gICAgdW5pdDogJ3B0JyxcbiAgICBmb3JtYXQ6ICdhNCcsXG4gICAgaG90Zml4ZXM6IFtdLCAvLyBhbiBhcnJheSBvZiBob3RmaXggc3RyaW5ncyB0byBlbmFibGVcbiAgICBsaW5lSGVpZ2h0OiBERUZBVUxUX0xJTkVfSEVJR0hUXG4gIH07XG4gIHRoaXMub3B0aW9ucyA9IHsgLi4ub3B0aW9ucyB9O1xuICB0aGlzLmRvYyA9IG5ldyBKc1BERihqc1BkZk9wdGlvbnMpLnNldFByb3BlcnRpZXMoe1xuICAgIHRpdGxlXG4gIH0pO1xuICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gIHRoaXMucGFnZVdpZHRoID0gdGhpcy5kb2MuaW50ZXJuYWwucGFnZVNpemUuZ2V0V2lkdGgoKTtcbiAgdGhpcy5wYWdlSGVpZ2h0ID0gdGhpcy5kb2MuaW50ZXJuYWwucGFnZVNpemUuZ2V0SGVpZ2h0KCk7XG4gIHRoaXMucGFnZU1hcmdpbkxlZnQgPSBvcHRpb25zLnBhZ2VNYXJnaW5MZWZ0IHx8IDA7XG4gIHRoaXMucGFnZU1hcmdpblJpZ2h0ID0gb3B0aW9ucy5wYWdlTWFyZ2luUmlnaHQgfHwgMDtcbiAgdGhpcy5wYWdlTWFyZ2luVG9wID0gb3B0aW9ucy5wYWdlTWFyZ2luVG9wIHx8IDA7XG4gIHRoaXMucGFnZU1hcmdpbkJvdHRvbSA9IG9wdGlvbnMucGFnZU1hcmdpbkJvdHRvbSB8fCAwO1xuICB0aGlzLm1heExpbmVXaWR0aCA9XG4gICAgdGhpcy5wYWdlV2lkdGggLSB0aGlzLnBhZ2VNYXJnaW5MZWZ0IC0gdGhpcy5wYWdlTWFyZ2luUmlnaHQ7XG4gIHRoaXMudG9jU2VjdGlvbnMgPSB7fTtcbiAgdGhpcy5nZW5lcmF0ZUZyb21Eb2NEZWZpbml0aW9uKCk7XG59XG5cbkpzUERGTWFrZS5wcm90b3R5cGUuc2l6ZSA9IGZ1bmN0aW9uIHNpemUoKSB7XG4gIHJldHVybiB0aGlzLmRvYy5pbnRlcm5hbC5wYWdlcy5sZW5ndGggLSAxO1xufTtcblxuSnNQREZNYWtlLnByb3RvdHlwZS5hZGRQYWdlID0gZnVuY3Rpb24gYWRkUGFnZSgpIHtcbiAgY29uc3QgeyBkb2MgfSA9IHRoaXM7XG4gIGNvbnN0IGN1cnJlbnRQYWdlID0gdGhpcy5nZXRDdXJyZW50UGFnZU51bWJlcigpO1xuICBpZiAoY3VycmVudFBhZ2UgPT09IHRoaXMuc2l6ZSgpKSB7XG4gICAgZG9jLmFkZFBhZ2UoKTtcbiAgfSBlbHNlIHtcbiAgICBkb2MuaW5zZXJ0UGFnZShjdXJyZW50UGFnZSk7XG4gIH1cbn07XG5cbkpzUERGTWFrZS5wcm90b3R5cGUuY2xlYXJEb2MgPSBmdW5jdGlvbiBjbGVhckRvYygpIHtcbiAgY29uc3QgeyBkb2MgfSA9IHRoaXM7XG4gIHdoaWxlIChkb2MuaW50ZXJuYWwucGFnZXMubGVuZ3RoID4gMSkge1xuICAgIGRvYy5kZWxldGVQYWdlKDEpO1xuICB9XG4gIHRoaXMuYWRkUGFnZSgpO1xufTtcblxuSnNQREZNYWtlLnByb3RvdHlwZS51cGRhdGVEb2NEZWZpbml0aW9uID0gZnVuY3Rpb24gdXBkYXRlRG9jRGVmaW5pdGlvbihcbiAgZG9jRGVmaW5pdGlvblxuKSB7XG4gIHRoaXMuZG9jRGVmaW5pdGlvbiA9IGRvY0RlZmluaXRpb247XG4gIHRoaXMuZ2VuZXJhdGVGcm9tRG9jRGVmaW5pdGlvbigpO1xufTtcblxuSnNQREZNYWtlLnByb3RvdHlwZS5nZXRDdXJyZW50UGFnZU51bWJlciA9IGZ1bmN0aW9uIGdldEN1cnJlbnRQYWdlTnVtYmVyKCkge1xuICByZXR1cm4gKHRoaXMuZG9jLmludGVybmFsLnBhZ2VzWzFdICYmIHRoaXMuZG9jLmludGVybmFsLmdldEN1cnJlbnRQYWdlSW5mbygpLnBhZ2VOdW1iZXIpIHx8IDA7XG59O1xuXG5Kc1BERk1ha2UucHJvdG90eXBlLmlzQ3Vyc29yT3V0T2ZQYWdlVmVydGljYWxseSA9IGZ1bmN0aW9uIGlzQ3Vyc29yT3V0T2ZQYWdlVmVydGljYWxseShcbiAgeU9mZnNldFxuKSB7XG4gIHJldHVybiB5T2Zmc2V0ID4gdGhpcy5wYWdlSGVpZ2h0IC0gdGhpcy5wYWdlTWFyZ2luQm90dG9tO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBiZSBpbmxpbmVkXG4gKiBAcGFyYW0ge051bWJlcn0geE9mZnNldCBUaGUgeCBvZmZzZXQgZm9yIHRoZSBuZXcgdGV4dFxuICogQHBhcmFtIHtOdW1iZXJ9IHlPZmZzZXQgVGhlIHkgb2Zmc2V0IGZvciB0aGUgbmV3IHRleHRcbiAqIEBwYXJhbSB7TnVtYmVyfSBmb250U2l6ZSBUaGUgZm9udCBzaXplIGZvciB0aGUgbmV3IHRleHRcbiAqIEBwYXJhbSB7TnVtYmVyfSBtYXhGb250U2l6ZSBUaGUgbWF4aW11bSBmb250IHNpemUgaW4gdGhpcyBsaW5lLlxuICogQHBhcmFtIHtTdHJpbmd9IGFsaWduIEVpdGhlciAnbGVmdCcsICdyaWdodCcgb3IgJ2NlbnRlcicsIGRlZmF1bHQgaXMgJ2xlZnQnXG4gKi9cbkpzUERGTWFrZS5wcm90b3R5cGUuZHJhd1RleHRJbkxpbmUgPSBmdW5jdGlvbiBkcmF3VGV4dEluTGluZSh7XG4gIHRleHQsXG4gIGZvbnRTaXplLFxuICBmb250TmFtZSxcbiAgZm9udFN0eWxlLFxuICB0ZXh0Q29sb3IsXG4gIGxpbmVXaWR0aCxcbiAgeE9mZnNldCxcbiAgeU9mZnNldCxcbiAgcGFnZU51bWJlcixcbiAgbWF4Rm9udFNpemUsXG4gIGlzTGluayxcbiAgbGlua1BhZ2UsXG4gIGxpbmtVcmwsXG4gIGhhc0J1bGxldCxcbiAgYnVsbGV0U3BhY2luZyxcbiAgaGlnaGxpZ2h0Q29sb3Jcbn0pIHtcbiAgY29uc3QgeyBkb2MgfSA9IHRoaXM7XG4gIGNvbnN0IGNlbnRlciA9IGZvbnRTaXplIC8gMi4wICsgZm9udFNpemUgLyA0LjA7IC8vIFRoZSByZW5kZXJlciBzdGFydHMgZHJhd2luZyB0ZXh0IGF0IHRoZSBjZW50ZXJcbiAgaWYgKGhpZ2hsaWdodENvbG9yKSB7XG4gICAgZG9jLnNldERyYXdDb2xvcigwKTtcbiAgICBkb2Muc2V0RmlsbENvbG9yKGhpZ2hsaWdodENvbG9yWzBdLCBoaWdobGlnaHRDb2xvclsxXSwgaGlnaGxpZ2h0Q29sb3JbMl0pO1xuICAgIGRvYy5yZWN0KHhPZmZzZXQsIHlPZmZzZXQsIGxpbmVXaWR0aCwgZm9udFNpemUsICdGJyk7XG4gIH1cbiAgZG9jXG4gICAgLnNldFBhZ2UocGFnZU51bWJlcilcbiAgICAuc2V0Rm9udChmb250TmFtZSwgZm9udFN0eWxlKVxuICAgIC5zZXRGb250U2l6ZShmb250U2l6ZSlcbiAgICAuc2V0VGV4dENvbG9yKHRleHRDb2xvcik7XG4gIGlmIChpc0xpbmspIHtcbiAgICBsZXQgbGluayA9IHtcbiAgICAgIHBhZ2VOdW1iZXI6IGxpbmtQYWdlXG4gICAgfTtcbiAgICBpZiAobGlua1VybCkge1xuICAgICAgbGluayA9IHtcbiAgICAgICAgdXJsOiBsaW5rVXJsXG4gICAgICB9O1xuICAgIH1cbiAgICBkb2MudGV4dFdpdGhMaW5rKFxuICAgICAgdGV4dCxcbiAgICAgIHhPZmZzZXQsXG4gICAgICBjZW50ZXIgKyBNYXRoLm1heChmb250U2l6ZSwgbWF4Rm9udFNpemUpIC0gZm9udFNpemUgKyB5T2Zmc2V0LFxuICAgICAgbGlua1xuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgZG9jLnRleHQoXG4gICAgICB4T2Zmc2V0LFxuICAgICAgY2VudGVyICsgTWF0aC5tYXgoZm9udFNpemUsIG1heEZvbnRTaXplKSAtIGZvbnRTaXplICsgeU9mZnNldCxcbiAgICAgIHRleHRcbiAgICApO1xuICB9XG4gIGlmIChoYXNCdWxsZXQpIHtcbiAgICBkb2Muc2V0RHJhd0NvbG9yKDApO1xuICAgIGRvYy5zZXRGaWxsQ29sb3IoMCwgMCwgMCk7XG4gICAgZG9jLmNpcmNsZShcbiAgICAgIHhPZmZzZXQgLSBidWxsZXRTcGFjaW5nLFxuICAgICAgeU9mZnNldCArIGNlbnRlciAvIDEuOCxcbiAgICAgIGZvbnRTaXplIC8gNy4wLFxuICAgICAgJ0ZEJ1xuICAgICk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5Kc1BERk1ha2UucHJvdG90eXBlLmRyYXdQYXJhZ3JhcGhzID0gZnVuY3Rpb24gZHJhd1BhcmFncmFwaHMocGFyYWdyYXBocykge1xuICBwYXJhZ3JhcGhzLmZvckVhY2goKHsgbGluZXMgPSBbXSB9KSA9PlxuICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7XG4gICAgICB3aGlsZSAobGluZS5wYWdlTnVtYmVyID4gdGhpcy5zaXplKCkpIHtcbiAgICAgICAgdGhpcy5hZGRQYWdlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmRyYXdUZXh0SW5MaW5lKGxpbmUpO1xuICAgIH0pXG4gICk7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYW55IHNwZWNpYWwgY2hhcmFjdGVycyBmcm9tIHRoZSBnaXZlbiB0ZXh0XG4gKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBiZSB0cmFuc2Zvcm1lZFxuICovXG5Kc1BERk1ha2UucHJvdG90eXBlLmVzY2FwZVNwZWNpYWxDaGFyYWN0ZXJzID0gZnVuY3Rpb24gZXNjYXBlU3BlY2lhbENoYXJhY3RlcnMoXG4gIHRleHRcbikge1xuICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuICByZXR1cm4gdGV4dC5yZXBsYWNlKFxuICAgIC9bXkEtWmEteiAwLTkgXFxuXFx0XFwuLFxcP1wiXCIhQCNcXCQlXFxeJlxcKlxcKFxcKS1fPVxcKzs6PD5cXC9cXFxcXFx8XFx9XFx7XFxbXFxdYH5dKi9nLFxuICAgICcnXG4gICk7XG59O1xuXG5Kc1BERk1ha2UucHJvdG90eXBlLnJlbmRlclBhcmFncmFwaCA9IGZ1bmN0aW9uIHJlbmRlclBhcmFncmFwaChcbiAge1xuICAgIHRleHQsXG4gICAgcGFnZUJyZWFrID0gJ25vbmUnLFxuICAgIGZvbnRTaXplID0gREVGQVVMVF9GT05UX1NJWkUsXG4gICAgZm9udE5hbWUgPSBERUZBVUxUX0ZPTlRfTkFNRSxcbiAgICBmb250U3R5bGUgPSBERUZBVUxUX0ZPTlRfU1RZTEUsXG4gICAgdGV4dENvbG9yID0gREVGQVVMVF9URVhUX0NPTE9SLFxuICAgIGFsaWduID0gREVGQVVMVF9BTElHTixcbiAgICBtYXJnaW5Ub3AgPSAwLFxuICAgIG1hcmdpblJpZ2h0ID0gMCxcbiAgICBtYXJnaW5Cb3R0b20gPSAwLFxuICAgIG1hcmdpbkxlZnQgPSAwLFxuICAgIHRvY0lkcyA9IFtdLFxuICAgIHRvY0l0ZW1UZXh0LFxuICAgIGlzTGluayA9IGZhbHNlLFxuICAgIGxpbmtQYWdlLFxuICAgIGxpbmtVcmwsXG4gICAgbGlua1BhcmFncmFwaEluZGV4LFxuICAgIGhhc0J1bGxldCA9IGZhbHNlLFxuICAgIGJ1bGxldFNwYWNpbmcgPSBmb250U2l6ZSxcbiAgICBoaWdobGlnaHRDb2xvciA9IGZhbHNlXG4gIH0sXG4gIHhPZmZzZXQsXG4gIHlPZmZzZXQsXG4gIHBhZ2VOdW1iZXIsXG4gIHBhcmFncmFwaEluZGV4LFxuICBtYXhMaW5lc1BlclBhcmFncmFwaCA9IGZhbHNlXG4pIHtcbiAgY29uc3Qge1xuICAgIGRvYyxcbiAgICBtYXhMaW5lV2lkdGgsXG4gICAgdG9jU2VjdGlvbnMsXG4gICAgcGFnZU1hcmdpbkxlZnQsXG4gICAgcGFnZU1hcmdpblJpZ2h0LFxuICAgIHBhZ2VNYXJnaW5Ub3AsXG4gICAgcGFnZVdpZHRoXG4gIH0gPSB0aGlzO1xuXG4gIGlmICh0eXBlb2YgdGV4dCAhPT0gJ3N0cmluZycpIHtcbiAgICAvLyBUT0RPOiBIQU5ETEUgSU5MSU5FIFRFWFQgT0JKRUNUU1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGBUZXh0IGlzIG9ubHkgc3VwcG9ydGVkIGFzIHN0cmluZyBmb3JtYXQsIHRoaXMgc2VjdGlvbiB3aWxsIG5vdCBiZSByZW5kZXJlZCA9PiAke3RleHR9YFxuICAgICk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHRYT2Zmc2V0OiB4T2Zmc2V0LFxuICAgICAgbmV4dFlPZmZzZXQ6IHlPZmZzZXQsXG4gICAgICBuZXh0UGFnZTogcGFnZU51bWJlcixcbiAgICAgIGxpbmVzXG4gICAgfTtcbiAgfVxuICBpZiAoXG4gICAgcGFnZUJyZWFrID09PSAnYmVmb3JlJyB8fFxuICAgIHRoaXMuaXNDdXJzb3JPdXRPZlBhZ2VWZXJ0aWNhbGx5KHlPZmZzZXQgKyBmb250U2l6ZSlcbiAgKSB7XG4gICAgLy8gaWYgcGFnZSBicmVhayBiZWZvcmUgb3IgbmV4dCBsaW5lIGNhbid0IGJlIHdyaXR0ZW4gcmVzZXQgb2Zmc2V0IGFuZCBhZGQgYSBuZXcgcGFnZVxuICAgIHlPZmZzZXQgPSBwYWdlTWFyZ2luVG9wO1xuICAgIC8vIHRoaXMuYWRkUGFnZSgpO1xuICAgIHBhZ2VOdW1iZXIgKz0gMTtcbiAgfVxuXG4gIC8vIEluc2VydCB0aGlzIHBhcmFncmFwaCB0byBpdHMgdG9jIHNlY3Rpb24gaWYgYW55XG4gIHRvY0lkcy5mb3JFYWNoKHRvY0lkID0+IHtcbiAgICBpZiAoIXRvY1NlY3Rpb25zW3RvY0lkXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHRhYmxlIG9mIGNvbnRlbnRzIGlkICcke3RvY0lkfSdgKTtcbiAgICB9XG4gICAgdG9jU2VjdGlvbnNbdG9jSWRdLml0ZW1zLnB1c2goe1xuICAgICAgdGl0bGU6IHRvY0l0ZW1UZXh0IHx8IHRleHQsXG4gICAgICBwYXJhZ3JhcGhJbmRleFxuICAgIH0pO1xuICB9KTtcblxuICBpZiAoaGFzQnVsbGV0KSB7XG4gICAgLy8gZ2l2ZSBzb21lIHNwYWNlIGZvciB0aGUgYnVsbGV0IHBvaW50XG4gICAgbWFyZ2luTGVmdCArPSBidWxsZXRTcGFjaW5nO1xuICB9XG4gIC8vIHNwbGl0VGV4dFRvU2l6ZSB0YWtlcyB5b3VyIHN0cmluZyBhbmQgdHVybnMgaXQgaW4gdG8gYW4gYXJyYXkgb2Ygc3RyaW5ncyxcbiAgLy8gZWFjaCBvZiB3aGljaCBjYW4gYmUgZGlzcGxheWVkIHdpdGhpbiB0aGUgc3BlY2lmaWVkIG1heExpbmVXaWR0aC5cbiAgbGV0IHRleHRMaW5lcyA9IGRvY1xuICAgIC5zZXRGb250KGZvbnROYW1lLCBmb250U3R5bGUpXG4gICAgLnNldEZvbnRTaXplKGZvbnRTaXplKVxuICAgIC5zZXRUZXh0Q29sb3IodGV4dENvbG9yKVxuICAgIC5zcGxpdFRleHRUb1NpemUoXG4gICAgICB0aGlzLmVzY2FwZVNwZWNpYWxDaGFyYWN0ZXJzKHRleHQpLFxuICAgICAgbWF4TGluZVdpZHRoIC0gbWFyZ2luTGVmdCAtIG1hcmdpblJpZ2h0XG4gICAgKTtcblxuICBpZiAobWF4TGluZXNQZXJQYXJhZ3JhcGgpIHtcbiAgICB0ZXh0TGluZXMgPSB0ZXh0TGluZXMuc3BsaWNlKDAsIG1heExpbmVzUGVyUGFyYWdyYXBoKTtcbiAgfVxuXG4gIHlPZmZzZXQgKz0gbWFyZ2luVG9wO1xuXG4gIGNvbnN0IGxpbmVzID0gW107XG5cbiAgLy8gZG9jLnRleHQgY2FuIG5vdyBhZGQgdGhvc2UgbGluZXMgZWFzaWx5OyBvdGhlcndpc2UsIGl0IHdvdWxkIGhhdmUgcnVuIHRleHQgb2ZmIHRoZSBzY3JlZW4hXG4gIHRleHRMaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgIGlmICh0aGlzLmlzQ3Vyc29yT3V0T2ZQYWdlVmVydGljYWxseSh5T2Zmc2V0ICsgZm9udFNpemUpKSB7XG4gICAgICAvLyBpZiBuZXh0IGxpbmUgY2FuJ3QgYmUgd3JpdHRlbiByZXNldCBvZmZzZXQgYW5kIGFkZCBhIG5ldyBwYWdlXG4gICAgICB5T2Zmc2V0ID0gcGFnZU1hcmdpblRvcDtcbiAgICAgIC8vIHRoaXMuYWRkUGFnZSgpO1xuICAgICAgcGFnZU51bWJlciArPSAxO1xuICAgIH1cbiAgICB4T2Zmc2V0ID0gcGFnZU1hcmdpbkxlZnQgKyBtYXJnaW5MZWZ0O1xuICAgIGlmIChhbGlnbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgIHhPZmZzZXQgPVxuICAgICAgICBwYWdlV2lkdGggLyAyLjAgLVxuICAgICAgICBkb2MuZ2V0VGV4dFdpZHRoKGxpbmUpIC8gMi4wICtcbiAgICAgICAgbWFyZ2luTGVmdCAtXG4gICAgICAgIG1hcmdpblJpZ2h0O1xuICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICAgIHhPZmZzZXQgPVxuICAgICAgICBwYWdlV2lkdGggLSBkb2MuZ2V0VGV4dFdpZHRoKGxpbmUpIC0gcGFnZU1hcmdpblJpZ2h0IC0gbWFyZ2luUmlnaHQ7XG4gICAgfVxuICAgIGxpbmVzLnB1c2goe1xuICAgICAgdGV4dDogbGluZSxcbiAgICAgIGZvbnRTaXplLFxuICAgICAgZm9udE5hbWUsXG4gICAgICBmb250U3R5bGUsXG4gICAgICB0ZXh0Q29sb3IsXG4gICAgICBsaW5lV2lkdGg6XG4gICAgICAgIHBhZ2VXaWR0aCAtIHBhZ2VNYXJnaW5SaWdodCAtIG1hcmdpblJpZ2h0IC0gcGFnZU1hcmdpbkxlZnQgLSBtYXJnaW5MZWZ0LFxuICAgICAgeE9mZnNldCxcbiAgICAgIHlPZmZzZXQsXG4gICAgICBwYWdlTnVtYmVyLFxuICAgICAgbWF4Rm9udFNpemU6IGZvbnRTaXplLFxuICAgICAgaXNMaW5rLFxuICAgICAgbGlua1BhZ2UsXG4gICAgICBsaW5rVXJsLFxuICAgICAgbGlua1BhcmFncmFwaEluZGV4LFxuICAgICAgaGFzQnVsbGV0OiBpbmRleCA9PT0gMCAmJiBoYXNCdWxsZXQsIC8vIG9ubHkgZmlyc3QgbGluZSBzaG91bGQgY29udGFpbiB0aGUgYnVsbGV0IHBvaW50XG4gICAgICBidWxsZXRTcGFjaW5nLFxuICAgICAgaGlnaGxpZ2h0Q29sb3JcbiAgICB9KTtcbiAgICB5T2Zmc2V0ID0geU9mZnNldCArIGZvbnRTaXplO1xuICAgIC8vIFRPRE8gVVNFIFRISVMgSUYgQ1VSU09SIElTIFNUSUxMIElOIFRIRSBTQU1FIExJTkVcbiAgICAvLyB5T2Zmc2V0ID0geU9mZnNldCArIE1hdGgubWF4KGZvbnRTaXplLCBtYXhGb250U2l6ZSk7XG4gICAgLy8geE9mZnNldCA9IHhPZmZzZXQgKyBkb2MuZ2V0VGV4dFdpZHRoKGAke3RleHR9IGApO1xuICB9KTtcblxuICB5T2Zmc2V0ICs9IG1hcmdpbkJvdHRvbTtcblxuICBpZiAocGFnZUJyZWFrID09PSAnYWZ0ZXInKSB7XG4gICAgeU9mZnNldCA9IHBhZ2VNYXJnaW5Ub3A7XG4gICAgLy8gdGhpcy5hZGRQYWdlKCk7XG4gICAgcGFnZU51bWJlciArPSAxO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBuZXh0WE9mZnNldDogeE9mZnNldCxcbiAgICBuZXh0WU9mZnNldDogeU9mZnNldCxcbiAgICBuZXh0UGFnZTogcGFnZU51bWJlcixcbiAgICBsaW5lc1xuICB9O1xufTtcblxuSnNQREZNYWtlLnByb3RvdHlwZS50cmFuc2Zvcm1Db250ZW50VG9EcmF3YWJsZVBhcmFncmFwaHMgPSBmdW5jdGlvbiB0cmFuc2Zvcm1Db250ZW50VG9EcmF3YWJsZVBhcmFncmFwaHMoXG4gIGNvbnRlbnQsXG4gIG1heExpbmVzUGVyUGFyYWdyYXBoXG4pIHtcbiAgbGV0IHlPZmZzZXQgPSB0aGlzLnBhZ2VNYXJnaW5Ub3A7XG4gIGxldCB4T2Zmc2V0O1xuICBsZXQgY3VycmVudFBhZ2UgPSAxO1xuICByZXR1cm4gY29udGVudFxuICAgIC5tYXAoKHBhcmFtcywgaW5kZXgpID0+IHtcbiAgICAgIGlmIChwYXJhbXMudG9jKSB7XG4gICAgICAgIGlmIChjdXJyZW50UGFnZSA+IDEgJiYgaW5kZXggPCBjb250ZW50Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB0aGUgZmlyc3QgcGFnZSBhbmQgaXQncyBub3QgdGhlIGxhc3QgcGFnZSBhZGQgYW5vdGhlciBwYWdlIGFmdGVyIHRoZSB0b2MgZm9yIHRoZSBuZXh0IGNvbnRlbnRcbiAgICAgICAgICBjdXJyZW50UGFnZSArPSAxO1xuICAgICAgICAgIHlPZmZzZXQgPSB0aGlzLnBhZ2VNYXJnaW5Ub3A7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpc1RvYzogdHJ1ZSxcbiAgICAgICAgICBpZDogcGFyYW1zLnRvYy5pZFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3Qge1xuICAgICAgICBuZXh0WE9mZnNldCxcbiAgICAgICAgbmV4dFlPZmZzZXQsXG4gICAgICAgIG5leHRQYWdlLFxuICAgICAgICBsaW5lc1xuICAgICAgfSA9IHRoaXMucmVuZGVyUGFyYWdyYXBoKFxuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHhPZmZzZXQsXG4gICAgICAgIHlPZmZzZXQsXG4gICAgICAgIGN1cnJlbnRQYWdlLFxuICAgICAgICBpbmRleCxcbiAgICAgICAgbWF4TGluZXNQZXJQYXJhZ3JhcGhcbiAgICAgICk7XG4gICAgICB5T2Zmc2V0ID0gbmV4dFlPZmZzZXQ7XG4gICAgICB4T2Zmc2V0ID0gbmV4dFhPZmZzZXQ7XG4gICAgICBjdXJyZW50UGFnZSA9IG5leHRQYWdlO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGluZXNcbiAgICAgIH07XG4gICAgfSlcbiAgICAuZmlsdGVyKGEgPT4gYSk7XG59O1xuXG5Kc1BERk1ha2UucHJvdG90eXBlLmdlbmVyYXRlRnJvbURvY0RlZmluaXRpb24gPSBmdW5jdGlvbiBnZW5lcmF0ZUZyb21Eb2NEZWZpbml0aW9uKCkge1xuICBjb25zdCB7IGRvY0RlZmluaXRpb24gfSA9IHRoaXM7XG4gIHRoaXMuY2xlYXJEb2MoKTtcbiAgdGhpcy5pbml0VE9DKCk7XG4gIGNvbnN0IHBhcmFncmFwaHMgPSB0aGlzLnRyYW5zZm9ybUNvbnRlbnRUb0RyYXdhYmxlUGFyYWdyYXBocyhcbiAgICBkb2NEZWZpbml0aW9uLmNvbnRlbnRcbiAgKTsgLy8gQXJyYXkgb2YgUGFyYWdyYXBoIHdoZXJlIGEgUGFyYWdhcGggaXMgYW4gQXJyYXkgb2YgTGluZXNcbiAgY29uc3QgeyB0b2NTZWN0aW9ucyB9ID0gdGhpcztcbiAgT2JqZWN0LmVudHJpZXModG9jU2VjdGlvbnMpLmZvckVhY2goKFt0b2NJZCwgdG9jU2VjdGlvbl0pID0+IHtcbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy50cmFuc2Zvcm1UT0NUb0NvbnRlbnQodG9jU2VjdGlvbik7XG4gICAgY29uc3QgdG9jUGFyYWdyYXBocyA9IHRoaXMudHJhbnNmb3JtQ29udGVudFRvRHJhd2FibGVQYXJhZ3JhcGhzKGNvbnRlbnQsIDEpOyAvLyB0cmFuc2Zvcm0gdG8gZHJhd2FibGUgcGFyYWdyYXBoIHdpdGggbWF4IDEgbGluZSBwZXIgcGFyYWdyYXBoXG5cbiAgICAvLyBNZXJnZSB0b2NQYXJhZ3JhcGhzIGludG8gdGhlIGN1cnJlbnQgcGFyYWdyYXBoc1xuICAgIHBhcmFncmFwaHMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmlzVG9jICYmIHAuaWQgPT09IHRvY0lkKSB7XG4gICAgICAgIHAubGluZXMgPSB0b2NQYXJhZ3JhcGhzLm1hcChwID0+IHAubGluZXMpLmZsYXQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgdGhpcy5kcmF3UGFyYWdyYXBocyh0aGlzLnVwZGF0ZVRPQ0xpbmtzKHBhcmFncmFwaHMpKTtcbiAgdGhpcy5yZW5kZXJTdGFtcFRvUGFnZXMoKTtcbn07XG5cbkpzUERGTWFrZS5wcm90b3R5cGUucmVuZGVyU3RhbXBUb1BhZ2VzID0gZnVuY3Rpb24gcmVuZGVyU3RhbXBUb1BhZ2VzKCkge1xuICBjb25zdCB7IGRvY0RlZmluaXRpb24sIGRvYywgdG9jU2VjdGlvbnMsIHBhZ2VXaWR0aCwgcGFnZUhlaWdodCB9ID0gdGhpcztcbiAgbGV0IHsgcmVuZGVyU3RhbXAsIHJlbmRlckZvb3RlciB9ID0gZG9jRGVmaW5pdGlvbjtcbiAgaWYgKHJlbmRlckZvb3Rlcikge1xuICAgIGNvbnNvbGUud2FybignRGVwcmljYXRlZCB1c2FnZSByZW5kZXJGb290ZXIsIHVzZSByZW5kZXJTdGFtcCBpbnN0ZWFkJyk7XG4gICAgcmVuZGVyU3RhbXAgPSByZW5kZXJGb290ZXI7XG4gIH1cbiAgaWYgKHJlbmRlclN0YW1wKSB7XG4gICAgbGV0IGN1cnJlbnRQYWdlTnVtYmVyID0gMTtcbiAgICB3aGlsZSAoY3VycmVudFBhZ2VOdW1iZXIgPD0gdGhpcy5zaXplKCkpIHtcbiAgICAgIGRvYy5zZXRQYWdlKGN1cnJlbnRQYWdlTnVtYmVyKTtcbiAgICAgIHJlbmRlclN0YW1wKFxuICAgICAgICBkb2MsXG4gICAgICAgIGN1cnJlbnRQYWdlTnVtYmVyLFxuICAgICAgICB7XG4gICAgICAgICAgd2lkdGg6IHBhZ2VXaWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IHBhZ2VIZWlnaHRcbiAgICAgICAgfSxcbiAgICAgICAgdG9jU2VjdGlvbnNcbiAgICAgICk7XG4gICAgICBjdXJyZW50UGFnZU51bWJlciArPSAxO1xuICAgIH1cbiAgfVxufTtcblxuSnNQREZNYWtlLnByb3RvdHlwZS5kb3dubG9hZCA9IGZ1bmN0aW9uIGRvd25sb2FkKCkge1xuICB0aGlzLmRvYy5zYXZlKHRoaXMudGl0bGUpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZEpzUERGQVBJKGNiKSB7XG4gIGNiKEpzUERGLkFQSSk7XG59XG4iLCJleHBvcnQgY29uc3QgREVGQVVMVF9GT05UX1NJWkUgPSAxODtcbmV4cG9ydCBjb25zdCBERUZBVUxUX0xJTkVfSEVJR0hUID0gMTtcbmV4cG9ydCBjb25zdCBERUZBVUxUX0FMSUdOID0gJ2xlZnQnO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfRk9OVF9OQU1FID0gJ2hlbHZldGljYSc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9GT05UX1NUWUxFID0gJ25vcm1hbCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9URVhUX0NPTE9SID0gJ2JsYWNrJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICBERUZBVUxUX0ZPTlRfU0laRSxcbiAgREVGQVVMVF9MSU5FX0hFSUdIVCxcbiAgREVGQVVMVF9BTElHTixcbiAgREVGQVVMVF9GT05UX05BTUUsXG4gIERFRkFVTFRfRk9OVF9TVFlMRSxcbiAgREVGQVVMVF9URVhUX0NPTE9SXG59O1xuIiwiZXhwb3J0IGNvbnN0IG1heEJ5ID0gKFxuICBhcnJheSA9IFtdLFxuICBnZXRWYWx1ZSA9IG9iaiA9PiBvYmosXG4gIG1heEZ1bmMgPSBNYXRoLm1heFxuKSA9PiB7XG4gIGlmIChhcnJheSAmJiBhcnJheS5sZW5ndGgpIHtcbiAgICByZXR1cm4gYXJyYXkucmVkdWNlKFxuICAgICAgKHByZXYsIGN1cnJlbnQpID0+IG1heEZ1bmMoZ2V0VmFsdWUocHJldiksIGdldFZhbHVlKGN1cnJlbnQpKSxcbiAgICAgIGFycmF5WzBdXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuU3RyaW5nLnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLnNwbGl0KCcnKVxuICAgIC5yZXZlcnNlKClcbiAgICAuam9pbignJyk7XG59O1xuXG5jb25zdCBFUFMgPSAxZS01O1xuXG5jb25zdCBsZXNzVGhhbk9yRXF1YWwgPSAoYSwgYikgPT4ge1xuICByZXR1cm4gYSA8IGIgfHwgTWF0aC5hYnMoYSAtIGIpIDwgRVBTO1xufTtcblxuY29uc3QgcmVtb3ZlQ2hhcmFjdGVyc1RvRml0V2lkdGggPSAoXG4gIHRleHQsXG4gIHdpZHRoLFxuICBudW1PZkRvdHMsXG4gIGdldFRleHRXaWR0aCxcbiAgc2VwZXJhdG9yID0gJyAnXG4pID0+IHtcbiAgY29uc3QgcGFkZGluZ1RleHQgPSBBcnJheShudW1PZkRvdHMpXG4gICAgLmZpbGwoJy4nKVxuICAgIC5qb2luKCcnKVxuICAgIC5jb25jYXQoc2VwZXJhdG9yKTtcbiAgY29uc3QgdG90YWxXaWR0aCA9IHdpZHRoIC0gZ2V0VGV4dFdpZHRoKHBhZGRpbmdUZXh0KTtcbiAgbGV0IG5UZXh0ID0gJyc7XG4gIGxldCBpID0gMDtcbiAgd2hpbGUgKFxuICAgIGkgPCB0ZXh0Lmxlbmd0aCAmJlxuICAgIGxlc3NUaGFuT3JFcXVhbChcbiAgICAgIGdldFRleHRXaWR0aChuVGV4dC5jb25jYXQodGV4dFtpXSwgcGFkZGluZ1RleHQpKSxcbiAgICAgIHRvdGFsV2lkdGhcbiAgICApXG4gICkge1xuICAgIG5UZXh0ID0gblRleHQuY29uY2F0KHRleHRbaV0pO1xuICAgIGkgKz0gMTtcbiAgfVxuICBuVGV4dCA9IG5UZXh0LmNvbmNhdChwYWRkaW5nVGV4dCk7XG4gIHJldHVybiBuVGV4dDtcbn07XG5cbmNvbnN0IGFkZERvdHNUb0ZpdFdpZHRoID0gKHRleHQsIHdpZHRoLCBnZXRUZXh0V2lkdGgsIHNlcGVyYXRvciA9ICcgICcpID0+IHtcbiAgbGV0IG5UZXh0ID0gdGV4dDtcbiAgd2hpbGUgKGxlc3NUaGFuT3JFcXVhbChnZXRUZXh0V2lkdGgoblRleHQuY29uY2F0KCcuJywgc2VwZXJhdG9yKSksIHdpZHRoKSkge1xuICAgIG5UZXh0ID0gblRleHQuY29uY2F0KCcuJyk7XG4gIH1cbiAgcmV0dXJuIG5UZXh0LmNvbmNhdChzZXBlcmF0b3IpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIDIgbGluZXMgY29ubm5lY3RlZCB3aXRoIGRvdHMsIHRoZSBmaXJzdCBsaW5lIGlzIHRoZSBsaW5rIGFuZCB0aGUgc2Vjb25kIGlzIHRoZSBwYWdlIG51bWJlclxuICogQHBhcmFtIHtPYmplY3R9IGxpbmUgdGhlIGxpbmUgdG8gYWRkIGRvdHMgdG9cbiAqIEBwYXJhbSB7TnVtYmVyfSBtaW5Eb3RzIG1pbmltdW0gbnVtYmVyIG9mIGRvdHMgYmV0d2VlbiB0aGUgdHdvIHRleHRzXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VwZXJhdG9yIHRleHQgdG8gc2VwcmF0ZSBiZXR3ZWVuIHRoZSB0d28gdGV4dHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGdldFRleHRXaWR0aCBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgd2lkdGggb2YgYSBnaXZlbiB0ZXh0IGluIHBpeGVsc1xuICovXG5leHBvcnQgY29uc3QgY29ubmVjdFdpdGhEb3RzVG9GaXRMaW5lID0gKGxpbmUsIGdldFRleHRXaWR0aCkgPT4ge1xuICBjb25zdCBtaW5SaWdodFRleHQgPSBBcnJheSg5KVxuICAgIC5maWxsKCcuJylcbiAgICAuam9pbignJylcbiAgICAuY29uY2F0KGxpbmUubGlua1BhZ2UpO1xuICBjb25zdCByaWdodFRleHRXaWR0aCA9IGdldFRleHRXaWR0aChtaW5SaWdodFRleHQpO1xuICBjb25zdCBsZWZ0VGV4dFdpZHRoID0gZ2V0VGV4dFdpZHRoKGxpbmUudGV4dCk7XG4gIGxldCBsZWZ0VGV4dCA9IGxpbmUudGV4dDtcbiAgbGV0IHJpZ2h0VGV4dCA9IG1pblJpZ2h0VGV4dDtcbiAgaWYgKGxpbmUubGluZVdpZHRoIC0gbGVmdFRleHRXaWR0aCA8IHJpZ2h0VGV4dFdpZHRoKSB7XG4gICAgLy8gdGhpcyBtZWFucyB3ZSBuZWVkIHRvIHJlbW92ZSBzb21lIGNoYXJhY3RlcnMgZnJvbSB0aGUgbGluZSB0ZXh0IHRvIG1ha2Ugc3BhY2UgZm9yIHRoZSBkb3RzIGFuZCB0aGUgcGFnZU51bWJlclxuICAgIGxlZnRUZXh0ID0gcmVtb3ZlQ2hhcmFjdGVyc1RvRml0V2lkdGgoXG4gICAgICBsaW5lLnRleHQsXG4gICAgICBsaW5lLmxpbmVXaWR0aCAtIHJpZ2h0VGV4dFdpZHRoLFxuICAgICAgMixcbiAgICAgIGdldFRleHRXaWR0aFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcmlnaHRUZXh0ID0gYWRkRG90c1RvRml0V2lkdGgoXG4gICAgICBtaW5SaWdodFRleHQucmV2ZXJzZSgpLFxuICAgICAgbGluZS5saW5lV2lkdGggLSBsZWZ0VGV4dFdpZHRoLFxuICAgICAgZ2V0VGV4dFdpZHRoXG4gICAgKS5yZXZlcnNlKCk7XG4gIH1cbiAgcmV0dXJuIFtcbiAgICB7IC4uLmxpbmUsIHRleHQ6IGxlZnRUZXh0IH0sXG4gICAge1xuICAgICAgLi4ubGluZSxcbiAgICAgIHRleHQ6IHJpZ2h0VGV4dCxcbiAgICAgIHhPZmZzZXQ6IGxpbmUueE9mZnNldCArIGxpbmUubGluZVdpZHRoIC0gZ2V0VGV4dFdpZHRoKHJpZ2h0VGV4dClcbiAgICB9XG4gIF07XG59O1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG1heEJ5XG59O1xuIiwiaW1wb3J0IHsgSnNQREZNYWtlIH0gZnJvbSAnLi9pbmRleCc7XG5pbXBvcnQgeyBjb25uZWN0V2l0aERvdHNUb0ZpdExpbmUgfSBmcm9tICcuL3V0aWxzJztcblxuSnNQREZNYWtlLnByb3RvdHlwZS5pbml0VE9DID0gZnVuY3Rpb24gaW5pdFRPQygpIHtcbiAgdGhpcy50b2NTZWN0aW9ucyA9IHt9O1xuICB0aGlzLmRvY0RlZmluaXRpb24uY29udGVudFxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnRvYylcbiAgICAuZm9yRWFjaCgoeyB0b2MgfSkgPT4ge1xuICAgICAgaWYgKHRoaXMudG9jU2VjdGlvbnNbdG9jLmlkXSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYER1cGxpY2F0ZSB0YWJsZSBvZiBjb250ZW50cyBpZCAnJHtcbiAgICAgICAgICAgIHRvYy5pZFxuICAgICAgICAgIH0nLCBwbGVhc2UgbWFrZSBzdXJlIGFsbCB0YWJsZSBvZiBjb250ZW50cyBoYXZlIGEgdW5pcSBpZGBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0b2MpOyAvLyBkZWVwIGNsb25lIHRvY1xuICAgICAgZGVsZXRlIG9wdGlvbnMuaWQ7XG4gICAgICB0aGlzLnRvY1NlY3Rpb25zW3RvYy5pZF0gPSB7XG4gICAgICAgIGl0ZW1zOiBbXSxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgfTtcbiAgICB9KTtcbn07XG5cbkpzUERGTWFrZS5wcm90b3R5cGUudHJhbnNmb3JtVE9DVG9Db250ZW50ID0gZnVuY3Rpb24gdHJhbnNmb3JtVE9DVG9Db250ZW50KFxuICBzZWN0aW9uXG4pIHtcbiAgY29uc3QgeyBvcHRpb25zLCBpdGVtcyB9ID0gc2VjdGlvbjtcbiAgY29uc3QgY29udGVudCA9IFtvcHRpb25zLnRpdGxlXTtcbiAgaXRlbXMuZm9yRWFjaCgoeyB0aXRsZSwgcGFyYWdyYXBoSW5kZXggfSkgPT4ge1xuICAgIGNvbnN0IHRvY0l0ZW0gPSBPYmplY3QuYXNzaWduKFxuICAgICAgeyB0ZXh0OiB0aXRsZSwgaXNMaW5rOiB0cnVlLCBsaW5rUGFyYWdyYXBoSW5kZXg6IHBhcmFncmFwaEluZGV4IH0sXG4gICAgICBvcHRpb25zLml0ZW1PcHRpb25zXG4gICAgKTtcbiAgICBjb250ZW50LnB1c2godG9jSXRlbSk7XG4gIH0pO1xuICByZXR1cm4gY29udGVudDtcbn07XG5cbkpzUERGTWFrZS5wcm90b3R5cGUudXBkYXRlVE9DTGlua3MgPSBmdW5jdGlvbiB1cGRhdGVUT0NMaW5rcyhwYXJhZ3JhcGhzKSB7XG4gIGxldCB0b2NQYXJhZ3JhcGhzU2l6ZSA9IDA7XG4gIGxldCBsYXN0UGFnZSA9IDA7XG5cbiAgLy8gTG9vcCBvbiBhbGwgcGFyYWdyYXBoc1xuICBwYXJhZ3JhcGhzLmZvckVhY2gocCA9PiB7XG4gICAgbGV0IHBhcmFncmFwaFNpemUgPSAwO1xuICAgIGlmIChwLmlzVG9jKSB7XG4gICAgICAvLyBJZiB0aGUgY3VycmVudCBwYXJhZ3JhcGggaXMgYSB0YWJsZSBvZiBjb250ZW50cyB1cGRhdGUgaXQncyBwYWdlIG51bWJlciB0byBiZSBhZnRlciBsYXN0IHBhZ2VcbiAgICAgIHAubGluZXMuZm9yRWFjaCgobGluZSwgaW5kZXgpID0+IHtcbiAgICAgICAgcGFyYWdyYXBoU2l6ZSA9IGxpbmUucGFnZU51bWJlcjtcbiAgICAgICAgbGluZS5wYWdlTnVtYmVyICs9IGxhc3RQYWdlO1xuICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAvLyBhc3NpZ24gdGhlIHBhZ2UgbnVtYmVyIG9mIHRoZSB0b2Mgc2VjdGlvbiB0byBpdCdzIGZpcnN0IGxpbmUgcGFnZSBudW1iZXJcbiAgICAgICAgICB0aGlzLnRvY1NlY3Rpb25zW3AuaWRdLnBhZ2VOdW1iZXIgPSBsaW5lLnBhZ2VOdW1iZXI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gSW5jcmVhc2UgdGhlIHNpemUgb2YgdGhlIHRhYmxlIG9mIGNvbnRlbnRzIHBhcmFncmFwaCBieSB0aGlzIHRvYyBzaXplXG4gICAgICB0b2NQYXJhZ3JhcGhzU2l6ZSArPSBwYXJhZ3JhcGhTaXplO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBpdCdzIGEgbm9ybWFsIHBhcmFncmFwaCB0aGVuIGluY3JlYXNlIGl0J3MgcGFnZSBudW1iZXIgd2l0aCB0aGUgdG9jUGFyYWdyYXBoU2l6ZSB0byBzaGlmdCBpdCBkb3duXG4gICAgICBwLmxpbmVzLmZvckVhY2gobGluZSA9PiB7XG4gICAgICAgIGxpbmUucGFnZU51bWJlciArPSB0b2NQYXJhZ3JhcGhzU2l6ZTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBsYXN0IHBhZ2VcbiAgICAgICAgbGFzdFBhZ2UgPSBsaW5lLnBhZ2VOdW1iZXI7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIExpbmsgYWxsIGxpbmtlZCBsaW5lcyB0byB0aGUgY29ycmVjdCBwYXJhZ3JhcGgncyBmaXJzdCBsaW5lXG4gIHBhcmFncmFwaHMuZm9yRWFjaChwID0+IHtcbiAgICBwLmxpbmVzID0gcC5saW5lcy5yZWR1Y2UoKG5MaW5lcywgbGluZSkgPT4ge1xuICAgICAgaWYgKGxpbmUubGlua1BhcmFncmFwaEluZGV4ID49IDApIHtcbiAgICAgICAgLy8gMiBsaW5lcyBjb25ubmVjdGVkIHdpdGggZG90cyB0aGUgZmlyc3QgbGluZSBpcyB0aGUgbGluaywgdGhlIHNlY29uZCBpcyB0aGUgcGFnZSBudW1iZXJcbiAgICAgICAgY29uc3QgZG90Q29ubmVjdExpbmVzID0gY29ubmVjdFdpdGhEb3RzVG9GaXRMaW5lKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLmxpbmUsXG4gICAgICAgICAgICBsaW5rUGFnZTogcGFyYWdyYXBoc1tsaW5lLmxpbmtQYXJhZ3JhcGhJbmRleF0ubGluZXNbMF0ucGFnZU51bWJlclxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGV4dCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb2NcbiAgICAgICAgICAgICAgLnNldEZvbnQobGluZS5mb250TmFtZSwgbGluZS5mb250U3R5bGUpXG4gICAgICAgICAgICAgIC5zZXRGb250U2l6ZShsaW5lLmZvbnRTaXplKVxuICAgICAgICAgICAgICAuZ2V0VGV4dFdpZHRoKHRleHQpO1xuICAgICAgICAgIH0gLy8gc2VuZCB0aGUgZ2V0IHRleHQgd2lkdGggZnVuY3Rpb24gYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IGxpbmUncyBmb250IHNwZWNzXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBuTGluZXMuY29uY2F0KGRvdENvbm5lY3RMaW5lcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbkxpbmVzLmNvbmNhdChsaW5lKTtcbiAgICB9LCBbXSk7XG4gIH0pO1xuXG4gIHJldHVybiBwYXJhZ3JhcGhzO1xufTtcbiJdLCJuYW1lcyI6WyJKc1BERk1ha2UiLCJ0aXRsZSIsImRvY0RlZmluaXRpb24iLCJvcHRpb25zIiwianNQZGZPcHRpb25zIiwiREVGQVVMVF9MSU5FX0hFSUdIVCIsImRvYyIsIkpzUERGIiwic2V0UHJvcGVydGllcyIsInBhZ2VXaWR0aCIsInRoaXMiLCJpbnRlcm5hbCIsInBhZ2VTaXplIiwiZ2V0V2lkdGgiLCJwYWdlSGVpZ2h0IiwiZ2V0SGVpZ2h0IiwicGFnZU1hcmdpbkxlZnQiLCJwYWdlTWFyZ2luUmlnaHQiLCJwYWdlTWFyZ2luVG9wIiwicGFnZU1hcmdpbkJvdHRvbSIsIm1heExpbmVXaWR0aCIsInRvY1NlY3Rpb25zIiwiZ2VuZXJhdGVGcm9tRG9jRGVmaW5pdGlvbiIsImV4dGVuZEpzUERGQVBJIiwiY2IiLCJBUEkiLCJERUZBVUxUX0ZPTlRfU0laRSIsIkRFRkFVTFRfQUxJR04iLCJERUZBVUxUX0ZPTlRfTkFNRSIsIkRFRkFVTFRfRk9OVF9TVFlMRSIsIkRFRkFVTFRfVEVYVF9DT0xPUiIsIlN0cmluZyIsInByb3RvdHlwZSIsInJldmVyc2UiLCJzcGxpdCIsImpvaW4iLCJFUFMiLCJsZXNzVGhhbk9yRXF1YWwiLCJhIiwiYiIsIk1hdGgiLCJhYnMiLCJyZW1vdmVDaGFyYWN0ZXJzVG9GaXRXaWR0aCIsInRleHQiLCJ3aWR0aCIsIm51bU9mRG90cyIsImdldFRleHRXaWR0aCIsInNlcGVyYXRvciIsInBhZGRpbmdUZXh0IiwiQXJyYXkiLCJmaWxsIiwiY29uY2F0IiwidG90YWxXaWR0aCIsIm5UZXh0IiwiaSIsImxlbmd0aCIsImFkZERvdHNUb0ZpdFdpZHRoIiwiY29ubmVjdFdpdGhEb3RzVG9GaXRMaW5lIiwibGluZSIsIm1pblJpZ2h0VGV4dCIsImxpbmtQYWdlIiwicmlnaHRUZXh0V2lkdGgiLCJsZWZ0VGV4dFdpZHRoIiwibGVmdFRleHQiLCJyaWdodFRleHQiLCJsaW5lV2lkdGgiLCJ4T2Zmc2V0IiwiaW5pdFRPQyIsImNvbnRlbnQiLCJmaWx0ZXIiLCJpdGVtIiwidG9jIiwiZm9yRWFjaCIsIl90aGlzIiwiaWQiLCJFcnJvciIsIk9iamVjdCIsImFzc2lnbiIsInRyYW5zZm9ybVRPQ1RvQ29udGVudCIsInNlY3Rpb24iLCJpdGVtcyIsInBhcmFncmFwaEluZGV4IiwidG9jSXRlbSIsImlzTGluayIsImxpbmtQYXJhZ3JhcGhJbmRleCIsIml0ZW1PcHRpb25zIiwicHVzaCIsInVwZGF0ZVRPQ0xpbmtzIiwicGFyYWdyYXBocyIsInRvY1BhcmFncmFwaHNTaXplIiwibGFzdFBhZ2UiLCJwYXJhZ3JhcGhTaXplIiwicCIsImlzVG9jIiwibGluZXMiLCJpbmRleCIsInBhZ2VOdW1iZXIiLCJyZWR1Y2UiLCJuTGluZXMiLCJkb3RDb25uZWN0TGluZXMiLCJfdGhpczIiLCJzZXRGb250IiwiZm9udE5hbWUiLCJmb250U3R5bGUiLCJzZXRGb250U2l6ZSIsImZvbnRTaXplIiwic2l6ZSIsInBhZ2VzIiwiYWRkUGFnZSIsImN1cnJlbnRQYWdlIiwiZ2V0Q3VycmVudFBhZ2VOdW1iZXIiLCJpbnNlcnRQYWdlIiwiY2xlYXJEb2MiLCJkZWxldGVQYWdlIiwidXBkYXRlRG9jRGVmaW5pdGlvbiIsImdldEN1cnJlbnRQYWdlSW5mbyIsImlzQ3Vyc29yT3V0T2ZQYWdlVmVydGljYWxseSIsInlPZmZzZXQiLCJkcmF3VGV4dEluTGluZSIsInRleHRDb2xvciIsIm1heEZvbnRTaXplIiwibGlua1VybCIsImhhc0J1bGxldCIsImJ1bGxldFNwYWNpbmciLCJoaWdobGlnaHRDb2xvciIsImNlbnRlciIsInNldERyYXdDb2xvciIsInNldEZpbGxDb2xvciIsInJlY3QiLCJzZXRQYWdlIiwic2V0VGV4dENvbG9yIiwibGluayIsInRleHRXaXRoTGluayIsIm1heCIsImNpcmNsZSIsImRyYXdQYXJhZ3JhcGhzIiwiZXNjYXBlU3BlY2lhbENoYXJhY3RlcnMiLCJyZXBsYWNlIiwicmVuZGVyUGFyYWdyYXBoIiwicGFnZUJyZWFrIiwiYWxpZ24iLCJtYXJnaW5Ub3AiLCJtYXJnaW5SaWdodCIsIm1hcmdpbkJvdHRvbSIsIm1hcmdpbkxlZnQiLCJ0b2NJZHMiLCJ0b2NJdGVtVGV4dCIsIm1heExpbmVzUGVyUGFyYWdyYXBoIiwid2FybiIsInRvY0lkIiwidGV4dExpbmVzIiwic3BsaXRUZXh0VG9TaXplIiwic3BsaWNlIiwidHJhbnNmb3JtQ29udGVudFRvRHJhd2FibGVQYXJhZ3JhcGhzIiwibWFwIiwicGFyYW1zIiwiX3RoaXMzIiwibmV4dFhPZmZzZXQiLCJuZXh0WU9mZnNldCIsIm5leHRQYWdlIiwiZW50cmllcyIsInRvY1NlY3Rpb24iLCJfdGhpczQiLCJ0b2NQYXJhZ3JhcGhzIiwiZmxhdCIsInJlbmRlclN0YW1wVG9QYWdlcyIsInJlbmRlclN0YW1wIiwicmVuZGVyRm9vdGVyIiwiY3VycmVudFBhZ2VOdW1iZXIiLCJkb3dubG9hZCIsInNhdmUiXSwibWFwcGluZ3MiOiJpR0FXTyxRQUFTQSxXQUFVQyxFQUFPQyxNQUFlQyxrRUFDekNELGNBQWdCQSxLQUNmRSxnQkFDUyxTQUNQLFlBQ0UsNEJBRUlDLDBCQUVURixvQkFBZUEsUUFDZkcsSUFBTSxHQUFJQyxPQUFNSCxHQUFjSSw4QkFHOUJQLE1BQVFBLE9BQ1JRLFVBQVlDLEtBQUtKLElBQUlLLFNBQVNDLFNBQVNDLGdCQUN2Q0MsV0FBYUosS0FBS0osSUFBSUssU0FBU0MsU0FBU0csaUJBQ3hDQyxlQUFpQmIsRUFBUWEsZ0JBQWtCLE9BQzNDQyxnQkFBa0JkLEVBQVFjLGlCQUFtQixPQUM3Q0MsY0FBZ0JmLEVBQVFlLGVBQWlCLE9BQ3pDQyxpQkFBbUJoQixFQUFRZ0Isa0JBQW9CLE9BQy9DQyxhQUNIVixLQUFLRCxVQUFZQyxLQUFLTSxlQUFpQk4sS0FBS08scUJBQ3pDSSxvQkFDQUMsNEJBd1lQLFFBQWdCQyxnQkFBZUMsS0FDMUJqQixNQUFNa0Isd0dDM2FFQyxrQkFBb0IsR0FDcEJyQixvQkFBc0IsRUFDdEJzQixjQUFnQixPQUNoQkMsa0JBQW9CLFlBQ3BCQyxtQkFBcUIsU0FDckJDLG1CQUFxQixvbUJDU2xDQyxRQUFPQyxVQUFVQyxRQUFVLGlCQUNsQnZCLE1BQUt3QixNQUFNLElBQ2ZELFVBQ0FFLEtBQUssSUFHVixJQUFNQyxLQUFNLEtBRU5DLGdCQUFrQixTQUFDQyxFQUFHQyxTQUNuQkQsR0FBSUMsR0FBS0MsS0FBS0MsSUFBSUgs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
