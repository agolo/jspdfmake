"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function JsPDFMake(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.docDefinition=e;var n={orientation:"p",unit:"pt",format:"a4",hotfixes:[],lineHeight:DEFAULT_LINE_HEIGHT};this.options=_extends({},i),this.doc=new JsPDF(n).setProperties({title:t}),this.title=t,this.pageWidth=this.doc.internal.pageSize.getWidth(),this.pageHeight=this.doc.internal.pageSize.getHeight(),this.pageMarginLeft=i.pageMarginLeft||0,this.pageMarginRight=i.pageMarginRight||0,this.pageMarginTop=i.pageMarginTop||0,this.pageMarginBottom=i.pageMarginBottom||0,this.maxLineWidth=this.pageWidth-this.pageMarginLeft-this.pageMarginRight,this.tocSections={},this.generateFromDocDefinition()}function extendJsPDFAPI(t){t(JsPDF.API)}Object.defineProperty(exports,"__esModule",{value:!0});var JsPDF=_interopDefault(require("jspdf")),DEFAULT_FONT_SIZE=18,DEFAULT_LINE_HEIGHT=1,DEFAULT_ALIGN="left",DEFAULT_FONT_NAME="helvetica",DEFAULT_FONT_STYLE="normal",DEFAULT_TEXT_COLOR="black",_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},slicedToArray=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.reverse=function(){return this.split("").reverse().join("")};var EPS=1e-5,lessThanOrEqual=function(t,e){return t<e||Math.abs(t-e)<EPS},removeCharactersToFitWidth=function(t,e,i,n){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:" ",o=Array(i).fill(".").join("").concat(r),a=e-n(o),s="",c=0;c<t.length&&lessThanOrEqual(n(s.concat(t[c],o)),a);)s=s.concat(t[c]),c+=1;return s=s.concat(o)},addDotsToFitWidth=function(t,e,i){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"  ",r=t;lessThanOrEqual(i(r.concat(".",n)),e);)r=r.concat(".");return r.concat(n)},connectWithDotsToFitLine=function(t,e){var i=Array(9).fill(".").join("").concat(t.linkPage),n=e(i),r=e(t.text),o=t.text,a=i;return t.lineWidth-r<n?o=removeCharactersToFitWidth(t.text,t.lineWidth-n,2,e):a=addDotsToFitWidth(i.reverse(),t.lineWidth-r,e).reverse(),[_extends({},t,{text:o}),_extends({},t,{text:a,xOffset:t.xOffset+t.lineWidth-e(a)})]};JsPDFMake.prototype.initTOC=function(){var t=this;this.tocSections={},this.docDefinition.content.filter(function(t){return t.toc}).forEach(function(e){var i=e.toc;if(t.tocSections[i.id])throw new Error("Duplicate table of contents id '"+i.id+"', please make sure all table of contents have a uniq id");var n=Object.assign({},i);delete n.id,t.tocSections[i.id]={items:[],options:n}})},JsPDFMake.prototype.transformTOCToContent=function(t){var e=t.options,i=t.items,n=[e.title];return i.forEach(function(t){var i=t.title,r=t.paragraphIndex,o=Object.assign({text:i,isLink:!0,linkParagraphIndex:r},e.itemOptions);n.push(o)}),n},JsPDFMake.prototype.updateTOCLinks=function(t){var e=this,i=0,n=0;return t.forEach(function(t){var r=0;t.isToc?(t.lines.forEach(function(i,o){r=i.pageNumber,i.pageNumber+=n,0===o&&(e.tocSections[t.id].pageNumber=i.pageNumber)}),i+=r):t.lines.forEach(function(t){t.pageNumber+=i,n=t.pageNumber})}),t.forEach(function(i){i.lines=i.lines.reduce(function(i,n){if(n.linkParagraphIndex>=0){var r=connectWithDotsToFitLine(_extends({},n,{linkPage:t[n.linkParagraphIndex].lines[0].pageNumber}),function(t){return e.doc.setFont(n.fontName,n.fontStyle).setFontSize(n.fontSize).getTextWidth(t)});return i.concat(r)}return i.concat(n)},[])}),t},JsPDFMake.prototype.size=function(){return this.doc.internal.pages.length-1},JsPDFMake.prototype.addPage=function(){var t=this.doc,e=this.getCurrentPageNumber();e===this.size()?t.addPage():t.insertPage(e)},JsPDFMake.prototype.clearDoc=function(){for(var t=this.doc;t.internal.pages.length>1;)t.deletePage(1);this.addPage()},JsPDFMake.prototype.updateDocDefinition=function(t){this.docDefinition=t,this.generateFromDocDefinition()},JsPDFMake.prototype.getCurrentPageNumber=function(){return this.doc.internal.pages[1]&&this.doc.internal.getCurrentPageInfo().pageNumber||0},JsPDFMake.prototype.isCursorOutOfPageVertically=function(t){return t>this.pageHeight-this.pageMarginBottom},JsPDFMake.prototype.drawTextInLine=function(t){var e=t.text,i=t.fontSize,n=t.fontName,r=t.fontStyle,o=t.textColor,a=t.lineWidth,s=t.xOffset,c=t.yOffset,h=t.pageNumber,l=t.maxFontSize,f=t.isLink,g=t.linkPage,p=t.linkUrl,u=t.hasBullet,d=t.bulletSpacing,P=t.highlightColor,T=this.doc,v=i/2+i/4;if(P&&(T.setDrawColor(0),T.setFillColor(P[0],P[1],P[2]),T.rect(s,c,a,i,"F")),T.setPage(h).setFont(n,r).setFontSize(i).setTextColor(o),f){var D={pageNumber:g};p&&(D={url:p}),T.textWithLink(e,s,v+Math.max(i,l)-i+c,D)}else T.text(s,v+Math.max(i,l)-i+c,e);return u&&(T.setDrawColor(0),T.setFillColor(0,0,0),T.circle(s-d,c+v/1.8,i/7,"FD")),!0},JsPDFMake.prototype.drawParagraphs=function(t){var e=this;t.forEach(function(t){var i=t.lines;return(void 0===i?[]:i).forEach(function(t){for(;t.pageNumber>e.size();)e.addPage();e.drawTextInLine(t)})})},JsPDFMake.prototype.escapeSpecialCharacters=function(t){return t.replace(/[^A-Za-z 0-9 \n\t\.,\?""!@#\$%\^&\*\(\)'-_=\+;:<>\/\\\|\}\{\[\]`~\’\‘]*/g,"")},JsPDFMake.prototype.renderParagraph=function(t,e,i,n,r){var o=t.text,a=t.pageBreak,s=void 0===a?"none":a,c=t.fontSize,h=void 0===c?DEFAULT_FONT_SIZE:c,l=t.fontName,f=void 0===l?DEFAULT_FONT_NAME:l,g=t.fontStyle,p=void 0===g?DEFAULT_FONT_STYLE:g,u=t.textColor,d=void 0===u?DEFAULT_TEXT_COLOR:u,P=t.align,T=void 0===P?DEFAULT_ALIGN:P,v=t.marginTop,D=void 0===v?0:v,F=t.marginRight,x=void 0===F?0:F,m=t.marginBottom,y=void 0===m?0:m,O=t.marginLeft,k=void 0===O?0:O,E=t.tocIds,M=void 0===E?[]:E,S=t.tocItemText,b=t.isLink,L=void 0!==b&&b,C=t.linkPage,_=t.linkUrl,N=t.linkParagraphIndex,A=t.hasBullet,J=void 0!==A&&A,I=t.bulletSpacing,w=void 0===I?h:I,W=t.highlightColor,z=void 0!==W&&W,U=this,j=arguments.length>5&&void 0!==arguments[5]&&arguments[5],H=this.doc,B=this.maxLineWidth,R=this.tocSections,q=this.pageMarginLeft,X=this.pageMarginRight,Y=this.pageMarginTop,G=this.pageWidth;if("string"!=typeof o)return console.warn("Text is only supported as string format, this section will not be rendered => "+o),{nextXOffset:e,nextYOffset:i,nextPage:n,lines:Z};("before"===s||this.isCursorOutOfPageVertically(i+h))&&(i=Y,n+=1),M.forEach(function(t){if(!R[t])throw new Error("Unknown table of contents id '"+t+"'");R[t].items.push({title:S||o,paragraphIndex:r})}),J&&(k+=w);var V=H.setFont(f,p).setFontSize(h).setTextColor(d).splitTextToSize(this.escapeSpecialCharacters(o),B-k-x);j&&(V=V.splice(0,j)),i+=D;var Z=[];return V.forEach(function(t,r){U.isCursorOutOfPageVertically(i+h)&&(i=Y,n+=1),e=q+k,"center"===T?e=G/2-H.getTextWidth(t)/2+k-x:"right"===T&&(e=G-H.getTextWidth(t)-X-x),Z.push({text:t,fontSize:h,fontName:f,fontStyle:p,textColor:d,lineWidth:G-X-x-q-k,xOffset:e,yOffset:i,pageNumber:n,maxFontSize:h,isLink:L,linkPage:C,linkUrl:_,linkParagraphIndex:N,hasBullet:0===r&&J,bulletSpacing:w,highlightColor:z}),i+=h}),i+=y,"after"===s&&(i=Y,n+=1),{nextXOffset:e,nextYOffset:i,nextPage:n,lines:Z}},JsPDFMake.prototype.transformContentToDrawableParagraphs=function(t,e){var i=this,n=this.pageMarginTop,r=void 0,o=1;return t.map(function(a,s){if(a.toc)return o>1&&s<t.length-1&&(o+=1,n=i.pageMarginTop),{isToc:!0,id:a.toc.id};var c=i.renderParagraph(a,r,n,o,s,e),h=c.nextXOffset,l=c.nextYOffset,f=c.nextPage,g=c.lines;return n=l,r=h,o=f,{lines:g}}).filter(function(t){return t})},JsPDFMake.prototype.generateFromDocDefinition=function(){var t=this,e=this.docDefinition;this.clearDoc(),this.initTOC();var i=this.transformContentToDrawableParagraphs(e.content),n=this.tocSections;Object.entries(n).forEach(function(e){var n=slicedToArray(e,2),r=n[0],o=n[1],a=t.transformTOCToContent(o),s=t.transformContentToDrawableParagraphs(a,1);i.forEach(function(t){t.isToc&&t.id===r&&(t.lines=s.map(function(t){return t.lines}).flat())})}),this.drawParagraphs(this.updateTOCLinks(i)),this.renderStampToPages()},JsPDFMake.prototype.renderStampToPages=function(){var t=this.docDefinition,e=this.doc,i=this.tocSections,n=this.pageWidth,r=this.pageHeight,o=t.renderStamp,a=t.renderFooter;if(a&&(console.warn("Depricated usage renderFooter, use renderStamp instead"),o=a),o)for(var s=1;s<=this.size();)e.setPage(s),o(e,s,{width:n,height:r},i),s+=1},JsPDFMake.prototype.download=function(){this.doc.save(this.title)},exports.JsPDFMake=JsPDFMake,exports.extendJsPDFAPI=extendJsPDFAPI;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyIsIi4uL3NyYy9jb25zdGFudHMuanMiLCIuLi9zcmMvdXRpbHMuanMiLCIuLi9zcmMvdG9jLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBKc1BERiBmcm9tICdqc3BkZic7XG5pbXBvcnQge1xuICBERUZBVUxUX0xJTkVfSEVJR0hULFxuICBERUZBVUxUX0FMSUdOLFxuICBERUZBVUxUX0ZPTlRfU0laRSxcbiAgREVGQVVMVF9GT05UX05BTUUsXG4gIERFRkFVTFRfRk9OVF9TVFlMRSxcbiAgREVGQVVMVF9URVhUX0NPTE9SXG59IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCAnLi90b2MnO1xuXG5leHBvcnQgZnVuY3Rpb24gSnNQREZNYWtlKHRpdGxlLCBkb2NEZWZpbml0aW9uLCBvcHRpb25zID0ge30pIHtcbiAgdGhpcy5kb2NEZWZpbml0aW9uID0gZG9jRGVmaW5pdGlvbjtcbiAgY29uc3QganNQZGZPcHRpb25zID0ge1xuICAgIG9yaWVudGF0aW9uOiAncCcsXG4gICAgdW5pdDogJ3B0JyxcbiAgICBmb3JtYXQ6ICdhNCcsXG4gICAgaG90Zml4ZXM6IFtdLCAvLyBhbiBhcnJheSBvZiBob3RmaXggc3RyaW5ncyB0byBlbmFibGVcbiAgICBsaW5lSGVpZ2h0OiBERUZBVUxUX0xJTkVfSEVJR0hUXG4gIH07XG4gIHRoaXMub3B0aW9ucyA9IHsgLi4ub3B0aW9ucyB9O1xuICB0aGlzLmRvYyA9IG5ldyBKc1BERihqc1BkZk9wdGlvbnMpLnNldFByb3BlcnRpZXMoe1xuICAgIHRpdGxlXG4gIH0pO1xuICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gIHRoaXMucGFnZVdpZHRoID0gdGhpcy5kb2MuaW50ZXJuYWwucGFnZVNpemUuZ2V0V2lkdGgoKTtcbiAgdGhpcy5wYWdlSGVpZ2h0ID0gdGhpcy5kb2MuaW50ZXJuYWwucGFnZVNpemUuZ2V0SGVpZ2h0KCk7XG4gIHRoaXMucGFnZU1hcmdpbkxlZnQgPSBvcHRpb25zLnBhZ2VNYXJnaW5MZWZ0IHx8IDA7XG4gIHRoaXMucGFnZU1hcmdpblJpZ2h0ID0gb3B0aW9ucy5wYWdlTWFyZ2luUmlnaHQgfHwgMDtcbiAgdGhpcy5wYWdlTWFyZ2luVG9wID0gb3B0aW9ucy5wYWdlTWFyZ2luVG9wIHx8IDA7XG4gIHRoaXMucGFnZU1hcmdpbkJvdHRvbSA9IG9wdGlvbnMucGFnZU1hcmdpbkJvdHRvbSB8fCAwO1xuICB0aGlzLm1heExpbmVXaWR0aCA9XG4gICAgdGhpcy5wYWdlV2lkdGggLSB0aGlzLnBhZ2VNYXJnaW5MZWZ0IC0gdGhpcy5wYWdlTWFyZ2luUmlnaHQ7XG4gIHRoaXMudG9jU2VjdGlvbnMgPSB7fTtcbiAgdGhpcy5nZW5lcmF0ZUZyb21Eb2NEZWZpbml0aW9uKCk7XG59XG5cbkpzUERGTWFrZS5wcm90b3R5cGUuc2l6ZSA9IGZ1bmN0aW9uIHNpemUoKSB7XG4gIHJldHVybiB0aGlzLmRvYy5pbnRlcm5hbC5wYWdlcy5sZW5ndGggLSAxO1xufTtcblxuSnNQREZNYWtlLnByb3RvdHlwZS5hZGRQYWdlID0gZnVuY3Rpb24gYWRkUGFnZSgpIHtcbiAgY29uc3QgeyBkb2MgfSA9IHRoaXM7XG4gIGNvbnN0IGN1cnJlbnRQYWdlID0gdGhpcy5nZXRDdXJyZW50UGFnZU51bWJlcigpO1xuICBpZiAoY3VycmVudFBhZ2UgPT09IHRoaXMuc2l6ZSgpKSB7XG4gICAgZG9jLmFkZFBhZ2UoKTtcbiAgfSBlbHNlIHtcbiAgICBkb2MuaW5zZXJ0UGFnZShjdXJyZW50UGFnZSk7XG4gIH1cbn07XG5cbkpzUERGTWFrZS5wcm90b3R5cGUuY2xlYXJEb2MgPSBmdW5jdGlvbiBjbGVhckRvYygpIHtcbiAgY29uc3QgeyBkb2MgfSA9IHRoaXM7XG4gIHdoaWxlIChkb2MuaW50ZXJuYWwucGFnZXMubGVuZ3RoID4gMSkge1xuICAgIGRvYy5kZWxldGVQYWdlKDEpO1xuICB9XG4gIHRoaXMuYWRkUGFnZSgpO1xufTtcblxuSnNQREZNYWtlLnByb3RvdHlwZS51cGRhdGVEb2NEZWZpbml0aW9uID0gZnVuY3Rpb24gdXBkYXRlRG9jRGVmaW5pdGlvbihcbiAgZG9jRGVmaW5pdGlvblxuKSB7XG4gIHRoaXMuZG9jRGVmaW5pdGlvbiA9IGRvY0RlZmluaXRpb247XG4gIHRoaXMuZ2VuZXJhdGVGcm9tRG9jRGVmaW5pdGlvbigpO1xufTtcblxuSnNQREZNYWtlLnByb3RvdHlwZS5nZXRDdXJyZW50UGFnZU51bWJlciA9IGZ1bmN0aW9uIGdldEN1cnJlbnRQYWdlTnVtYmVyKCkge1xuICByZXR1cm4gKHRoaXMuZG9jLmludGVybmFsLnBhZ2VzWzFdICYmIHRoaXMuZG9jLmludGVybmFsLmdldEN1cnJlbnRQYWdlSW5mbygpLnBhZ2VOdW1iZXIpIHx8IDA7XG59O1xuXG5Kc1BERk1ha2UucHJvdG90eXBlLmlzQ3Vyc29yT3V0T2ZQYWdlVmVydGljYWxseSA9IGZ1bmN0aW9uIGlzQ3Vyc29yT3V0T2ZQYWdlVmVydGljYWxseShcbiAgeU9mZnNldFxuKSB7XG4gIHJldHVybiB5T2Zmc2V0ID4gdGhpcy5wYWdlSGVpZ2h0IC0gdGhpcy5wYWdlTWFyZ2luQm90dG9tO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBiZSBpbmxpbmVkXG4gKiBAcGFyYW0ge051bWJlcn0geE9mZnNldCBUaGUgeCBvZmZzZXQgZm9yIHRoZSBuZXcgdGV4dFxuICogQHBhcmFtIHtOdW1iZXJ9IHlPZmZzZXQgVGhlIHkgb2Zmc2V0IGZvciB0aGUgbmV3IHRleHRcbiAqIEBwYXJhbSB7TnVtYmVyfSBmb250U2l6ZSBUaGUgZm9udCBzaXplIGZvciB0aGUgbmV3IHRleHRcbiAqIEBwYXJhbSB7TnVtYmVyfSBtYXhGb250U2l6ZSBUaGUgbWF4aW11bSBmb250IHNpemUgaW4gdGhpcyBsaW5lLlxuICogQHBhcmFtIHtTdHJpbmd9IGFsaWduIEVpdGhlciAnbGVmdCcsICdyaWdodCcgb3IgJ2NlbnRlcicsIGRlZmF1bHQgaXMgJ2xlZnQnXG4gKi9cbkpzUERGTWFrZS5wcm90b3R5cGUuZHJhd1RleHRJbkxpbmUgPSBmdW5jdGlvbiBkcmF3VGV4dEluTGluZSh7XG4gIHRleHQsXG4gIGZvbnRTaXplLFxuICBmb250TmFtZSxcbiAgZm9udFN0eWxlLFxuICB0ZXh0Q29sb3IsXG4gIGxpbmVXaWR0aCxcbiAgeE9mZnNldCxcbiAgeU9mZnNldCxcbiAgcGFnZU51bWJlcixcbiAgbWF4Rm9udFNpemUsXG4gIGlzTGluayxcbiAgbGlua1BhZ2UsXG4gIGxpbmtVcmwsXG4gIGhhc0J1bGxldCxcbiAgYnVsbGV0U3BhY2luZyxcbiAgaGlnaGxpZ2h0Q29sb3Jcbn0pIHtcbiAgY29uc3QgeyBkb2MgfSA9IHRoaXM7XG4gIGNvbnN0IGNlbnRlciA9IGZvbnRTaXplIC8gMi4wICsgZm9udFNpemUgLyA0LjA7IC8vIFRoZSByZW5kZXJlciBzdGFydHMgZHJhd2luZyB0ZXh0IGF0IHRoZSBjZW50ZXJcbiAgaWYgKGhpZ2hsaWdodENvbG9yKSB7XG4gICAgZG9jLnNldERyYXdDb2xvcigwKTtcbiAgICBkb2Muc2V0RmlsbENvbG9yKGhpZ2hsaWdodENvbG9yWzBdLCBoaWdobGlnaHRDb2xvclsxXSwgaGlnaGxpZ2h0Q29sb3JbMl0pO1xuICAgIGRvYy5yZWN0KHhPZmZzZXQsIHlPZmZzZXQsIGxpbmVXaWR0aCwgZm9udFNpemUsICdGJyk7XG4gIH1cbiAgZG9jXG4gICAgLnNldFBhZ2UocGFnZU51bWJlcilcbiAgICAuc2V0Rm9udChmb250TmFtZSwgZm9udFN0eWxlKVxuICAgIC5zZXRGb250U2l6ZShmb250U2l6ZSlcbiAgICAuc2V0VGV4dENvbG9yKHRleHRDb2xvcik7XG4gIGlmIChpc0xpbmspIHtcbiAgICBsZXQgbGluayA9IHtcbiAgICAgIHBhZ2VOdW1iZXI6IGxpbmtQYWdlXG4gICAgfTtcbiAgICBpZiAobGlua1VybCkge1xuICAgICAgbGluayA9IHtcbiAgICAgICAgdXJsOiBsaW5rVXJsXG4gICAgICB9O1xuICAgIH1cbiAgICBkb2MudGV4dFdpdGhMaW5rKFxuICAgICAgdGV4dCxcbiAgICAgIHhPZmZzZXQsXG4gICAgICBjZW50ZXIgKyBNYXRoLm1heChmb250U2l6ZSwgbWF4Rm9udFNpemUpIC0gZm9udFNpemUgKyB5T2Zmc2V0LFxuICAgICAgbGlua1xuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgZG9jLnRleHQoXG4gICAgICB4T2Zmc2V0LFxuICAgICAgY2VudGVyICsgTWF0aC5tYXgoZm9udFNpemUsIG1heEZvbnRTaXplKSAtIGZvbnRTaXplICsgeU9mZnNldCxcbiAgICAgIHRleHRcbiAgICApO1xuICB9XG4gIGlmIChoYXNCdWxsZXQpIHtcbiAgICBkb2Muc2V0RHJhd0NvbG9yKDApO1xuICAgIGRvYy5zZXRGaWxsQ29sb3IoMCwgMCwgMCk7XG4gICAgZG9jLmNpcmNsZShcbiAgICAgIHhPZmZzZXQgLSBidWxsZXRTcGFjaW5nLFxuICAgICAgeU9mZnNldCArIGNlbnRlciAvIDEuOCxcbiAgICAgIGZvbnRTaXplIC8gNy4wLFxuICAgICAgJ0ZEJ1xuICAgICk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5Kc1BERk1ha2UucHJvdG90eXBlLmRyYXdQYXJhZ3JhcGhzID0gZnVuY3Rpb24gZHJhd1BhcmFncmFwaHMocGFyYWdyYXBocykge1xuICBwYXJhZ3JhcGhzLmZvckVhY2goKHsgbGluZXMgPSBbXSB9KSA9PlxuICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7XG4gICAgICB3aGlsZSAobGluZS5wYWdlTnVtYmVyID4gdGhpcy5zaXplKCkpIHtcbiAgICAgICAgdGhpcy5hZGRQYWdlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmRyYXdUZXh0SW5MaW5lKGxpbmUpO1xuICAgIH0pXG4gICk7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYW55IHNwZWNpYWwgY2hhcmFjdGVycyBmcm9tIHRoZSBnaXZlbiB0ZXh0XG4gKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBiZSB0cmFuc2Zvcm1lZFxuICovXG5Kc1BERk1ha2UucHJvdG90eXBlLmVzY2FwZVNwZWNpYWxDaGFyYWN0ZXJzID0gZnVuY3Rpb24gZXNjYXBlU3BlY2lhbENoYXJhY3RlcnMoXG4gIHRleHRcbikge1xuICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuICByZXR1cm4gdGV4dC5yZXBsYWNlKFxuICAgIC9bXkEtWmEteiAwLTkgXFxuXFx0XFwuLFxcP1wiXCIhQCNcXCQlXFxeJlxcKlxcKFxcKSctXz1cXCs7Ojw+XFwvXFxcXFxcfFxcfVxce1xcW1xcXWB+XFzigJlcXOKAmF0qL2csXG4gICAgJydcbiAgKTtcbn07XG5cbkpzUERGTWFrZS5wcm90b3R5cGUucmVuZGVyUGFyYWdyYXBoID0gZnVuY3Rpb24gcmVuZGVyUGFyYWdyYXBoKFxuICB7XG4gICAgdGV4dCxcbiAgICBwYWdlQnJlYWsgPSAnbm9uZScsXG4gICAgZm9udFNpemUgPSBERUZBVUxUX0ZPTlRfU0laRSxcbiAgICBmb250TmFtZSA9IERFRkFVTFRfRk9OVF9OQU1FLFxuICAgIGZvbnRTdHlsZSA9IERFRkFVTFRfRk9OVF9TVFlMRSxcbiAgICB0ZXh0Q29sb3IgPSBERUZBVUxUX1RFWFRfQ09MT1IsXG4gICAgYWxpZ24gPSBERUZBVUxUX0FMSUdOLFxuICAgIG1hcmdpblRvcCA9IDAsXG4gICAgbWFyZ2luUmlnaHQgPSAwLFxuICAgIG1hcmdpbkJvdHRvbSA9IDAsXG4gICAgbWFyZ2luTGVmdCA9IDAsXG4gICAgdG9jSWRzID0gW10sXG4gICAgdG9jSXRlbVRleHQsXG4gICAgaXNMaW5rID0gZmFsc2UsXG4gICAgbGlua1BhZ2UsXG4gICAgbGlua1VybCxcbiAgICBsaW5rUGFyYWdyYXBoSW5kZXgsXG4gICAgaGFzQnVsbGV0ID0gZmFsc2UsXG4gICAgYnVsbGV0U3BhY2luZyA9IGZvbnRTaXplLFxuICAgIGhpZ2hsaWdodENvbG9yID0gZmFsc2VcbiAgfSxcbiAgeE9mZnNldCxcbiAgeU9mZnNldCxcbiAgcGFnZU51bWJlcixcbiAgcGFyYWdyYXBoSW5kZXgsXG4gIG1heExpbmVzUGVyUGFyYWdyYXBoID0gZmFsc2Vcbikge1xuICBjb25zdCB7XG4gICAgZG9jLFxuICAgIG1heExpbmVXaWR0aCxcbiAgICB0b2NTZWN0aW9ucyxcbiAgICBwYWdlTWFyZ2luTGVmdCxcbiAgICBwYWdlTWFyZ2luUmlnaHQsXG4gICAgcGFnZU1hcmdpblRvcCxcbiAgICBwYWdlV2lkdGhcbiAgfSA9IHRoaXM7XG5cbiAgaWYgKHR5cGVvZiB0ZXh0ICE9PSAnc3RyaW5nJykge1xuICAgIC8vIFRPRE86IEhBTkRMRSBJTkxJTkUgVEVYVCBPQkpFQ1RTXG4gICAgY29uc29sZS53YXJuKFxuICAgICAgYFRleHQgaXMgb25seSBzdXBwb3J0ZWQgYXMgc3RyaW5nIGZvcm1hdCwgdGhpcyBzZWN0aW9uIHdpbGwgbm90IGJlIHJlbmRlcmVkID0+ICR7dGV4dH1gXG4gICAgKTtcbiAgICByZXR1cm4ge1xuICAgICAgbmV4dFhPZmZzZXQ6IHhPZmZzZXQsXG4gICAgICBuZXh0WU9mZnNldDogeU9mZnNldCxcbiAgICAgIG5leHRQYWdlOiBwYWdlTnVtYmVyLFxuICAgICAgbGluZXNcbiAgICB9O1xuICB9XG4gIGlmIChcbiAgICBwYWdlQnJlYWsgPT09ICdiZWZvcmUnIHx8XG4gICAgdGhpcy5pc0N1cnNvck91dE9mUGFnZVZlcnRpY2FsbHkoeU9mZnNldCArIGZvbnRTaXplKVxuICApIHtcbiAgICAvLyBpZiBwYWdlIGJyZWFrIGJlZm9yZSBvciBuZXh0IGxpbmUgY2FuJ3QgYmUgd3JpdHRlbiByZXNldCBvZmZzZXQgYW5kIGFkZCBhIG5ldyBwYWdlXG4gICAgeU9mZnNldCA9IHBhZ2VNYXJnaW5Ub3A7XG4gICAgLy8gdGhpcy5hZGRQYWdlKCk7XG4gICAgcGFnZU51bWJlciArPSAxO1xuICB9XG5cbiAgLy8gSW5zZXJ0IHRoaXMgcGFyYWdyYXBoIHRvIGl0cyB0b2Mgc2VjdGlvbiBpZiBhbnlcbiAgdG9jSWRzLmZvckVhY2godG9jSWQgPT4ge1xuICAgIGlmICghdG9jU2VjdGlvbnNbdG9jSWRdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdGFibGUgb2YgY29udGVudHMgaWQgJyR7dG9jSWR9J2ApO1xuICAgIH1cbiAgICB0b2NTZWN0aW9uc1t0b2NJZF0uaXRlbXMucHVzaCh7XG4gICAgICB0aXRsZTogdG9jSXRlbVRleHQgfHwgdGV4dCxcbiAgICAgIHBhcmFncmFwaEluZGV4XG4gICAgfSk7XG4gIH0pO1xuXG4gIGlmIChoYXNCdWxsZXQpIHtcbiAgICAvLyBnaXZlIHNvbWUgc3BhY2UgZm9yIHRoZSBidWxsZXQgcG9pbnRcbiAgICBtYXJnaW5MZWZ0ICs9IGJ1bGxldFNwYWNpbmc7XG4gIH1cbiAgLy8gc3BsaXRUZXh0VG9TaXplIHRha2VzIHlvdXIgc3RyaW5nIGFuZCB0dXJucyBpdCBpbiB0byBhbiBhcnJheSBvZiBzdHJpbmdzLFxuICAvLyBlYWNoIG9mIHdoaWNoIGNhbiBiZSBkaXNwbGF5ZWQgd2l0aGluIHRoZSBzcGVjaWZpZWQgbWF4TGluZVdpZHRoLlxuICBsZXQgdGV4dExpbmVzID0gZG9jXG4gICAgLnNldEZvbnQoZm9udE5hbWUsIGZvbnRTdHlsZSlcbiAgICAuc2V0Rm9udFNpemUoZm9udFNpemUpXG4gICAgLnNldFRleHRDb2xvcih0ZXh0Q29sb3IpXG4gICAgLnNwbGl0VGV4dFRvU2l6ZShcbiAgICAgIHRoaXMuZXNjYXBlU3BlY2lhbENoYXJhY3RlcnModGV4dCksXG4gICAgICBtYXhMaW5lV2lkdGggLSBtYXJnaW5MZWZ0IC0gbWFyZ2luUmlnaHRcbiAgICApO1xuXG4gIGlmIChtYXhMaW5lc1BlclBhcmFncmFwaCkge1xuICAgIHRleHRMaW5lcyA9IHRleHRMaW5lcy5zcGxpY2UoMCwgbWF4TGluZXNQZXJQYXJhZ3JhcGgpO1xuICB9XG5cbiAgeU9mZnNldCArPSBtYXJnaW5Ub3A7XG5cbiAgY29uc3QgbGluZXMgPSBbXTtcblxuICAvLyBkb2MudGV4dCBjYW4gbm93IGFkZCB0aG9zZSBsaW5lcyBlYXNpbHk7IG90aGVyd2lzZSwgaXQgd291bGQgaGF2ZSBydW4gdGV4dCBvZmYgdGhlIHNjcmVlbiFcbiAgdGV4dExpbmVzLmZvckVhY2goKGxpbmUsIGluZGV4KSA9PiB7XG4gICAgaWYgKHRoaXMuaXNDdXJzb3JPdXRPZlBhZ2VWZXJ0aWNhbGx5KHlPZmZzZXQgKyBmb250U2l6ZSkpIHtcbiAgICAgIC8vIGlmIG5leHQgbGluZSBjYW4ndCBiZSB3cml0dGVuIHJlc2V0IG9mZnNldCBhbmQgYWRkIGEgbmV3IHBhZ2VcbiAgICAgIHlPZmZzZXQgPSBwYWdlTWFyZ2luVG9wO1xuICAgICAgLy8gdGhpcy5hZGRQYWdlKCk7XG4gICAgICBwYWdlTnVtYmVyICs9IDE7XG4gICAgfVxuICAgIHhPZmZzZXQgPSBwYWdlTWFyZ2luTGVmdCArIG1hcmdpbkxlZnQ7XG4gICAgaWYgKGFsaWduID09PSAnY2VudGVyJykge1xuICAgICAgeE9mZnNldCA9XG4gICAgICAgIHBhZ2VXaWR0aCAvIDIuMCAtXG4gICAgICAgIGRvYy5nZXRUZXh0V2lkdGgobGluZSkgLyAyLjAgK1xuICAgICAgICBtYXJnaW5MZWZ0IC1cbiAgICAgICAgbWFyZ2luUmlnaHQ7XG4gICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgeE9mZnNldCA9XG4gICAgICAgIHBhZ2VXaWR0aCAtIGRvYy5nZXRUZXh0V2lkdGgobGluZSkgLSBwYWdlTWFyZ2luUmlnaHQgLSBtYXJnaW5SaWdodDtcbiAgICB9XG4gICAgbGluZXMucHVzaCh7XG4gICAgICB0ZXh0OiBsaW5lLFxuICAgICAgZm9udFNpemUsXG4gICAgICBmb250TmFtZSxcbiAgICAgIGZvbnRTdHlsZSxcbiAgICAgIHRleHRDb2xvcixcbiAgICAgIGxpbmVXaWR0aDpcbiAgICAgICAgcGFnZVdpZHRoIC0gcGFnZU1hcmdpblJpZ2h0IC0gbWFyZ2luUmlnaHQgLSBwYWdlTWFyZ2luTGVmdCAtIG1hcmdpbkxlZnQsXG4gICAgICB4T2Zmc2V0LFxuICAgICAgeU9mZnNldCxcbiAgICAgIHBhZ2VOdW1iZXIsXG4gICAgICBtYXhGb250U2l6ZTogZm9udFNpemUsXG4gICAgICBpc0xpbmssXG4gICAgICBsaW5rUGFnZSxcbiAgICAgIGxpbmtVcmwsXG4gICAgICBsaW5rUGFyYWdyYXBoSW5kZXgsXG4gICAgICBoYXNCdWxsZXQ6IGluZGV4ID09PSAwICYmIGhhc0J1bGxldCwgLy8gb25seSBmaXJzdCBsaW5lIHNob3VsZCBjb250YWluIHRoZSBidWxsZXQgcG9pbnRcbiAgICAgIGJ1bGxldFNwYWNpbmcsXG4gICAgICBoaWdobGlnaHRDb2xvclxuICAgIH0pO1xuICAgIHlPZmZzZXQgPSB5T2Zmc2V0ICsgZm9udFNpemU7XG4gICAgLy8gVE9ETyBVU0UgVEhJUyBJRiBDVVJTT1IgSVMgU1RJTEwgSU4gVEhFIFNBTUUgTElORVxuICAgIC8vIHlPZmZzZXQgPSB5T2Zmc2V0ICsgTWF0aC5tYXgoZm9udFNpemUsIG1heEZvbnRTaXplKTtcbiAgICAvLyB4T2Zmc2V0ID0geE9mZnNldCArIGRvYy5nZXRUZXh0V2lkdGgoYCR7dGV4dH0gYCk7XG4gIH0pO1xuXG4gIHlPZmZzZXQgKz0gbWFyZ2luQm90dG9tO1xuXG4gIGlmIChwYWdlQnJlYWsgPT09ICdhZnRlcicpIHtcbiAgICB5T2Zmc2V0ID0gcGFnZU1hcmdpblRvcDtcbiAgICAvLyB0aGlzLmFkZFBhZ2UoKTtcbiAgICBwYWdlTnVtYmVyICs9IDE7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG5leHRYT2Zmc2V0OiB4T2Zmc2V0LFxuICAgIG5leHRZT2Zmc2V0OiB5T2Zmc2V0LFxuICAgIG5leHRQYWdlOiBwYWdlTnVtYmVyLFxuICAgIGxpbmVzXG4gIH07XG59O1xuXG5Kc1BERk1ha2UucHJvdG90eXBlLnRyYW5zZm9ybUNvbnRlbnRUb0RyYXdhYmxlUGFyYWdyYXBocyA9IGZ1bmN0aW9uIHRyYW5zZm9ybUNvbnRlbnRUb0RyYXdhYmxlUGFyYWdyYXBocyhcbiAgY29udGVudCxcbiAgbWF4TGluZXNQZXJQYXJhZ3JhcGhcbikge1xuICBsZXQgeU9mZnNldCA9IHRoaXMucGFnZU1hcmdpblRvcDtcbiAgbGV0IHhPZmZzZXQ7XG4gIGxldCBjdXJyZW50UGFnZSA9IDE7XG4gIHJldHVybiBjb250ZW50XG4gICAgLm1hcCgocGFyYW1zLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKHBhcmFtcy50b2MpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRQYWdlID4gMSAmJiBpbmRleCA8IGNvbnRlbnQubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIC8vIGlmIGl0J3Mgbm90IHRoZSBmaXJzdCBwYWdlIGFuZCBpdCdzIG5vdCB0aGUgbGFzdCBwYWdlIGFkZCBhbm90aGVyIHBhZ2UgYWZ0ZXIgdGhlIHRvYyBmb3IgdGhlIG5leHQgY29udGVudFxuICAgICAgICAgIGN1cnJlbnRQYWdlICs9IDE7XG4gICAgICAgICAgeU9mZnNldCA9IHRoaXMucGFnZU1hcmdpblRvcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlzVG9jOiB0cnVlLFxuICAgICAgICAgIGlkOiBwYXJhbXMudG9jLmlkXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjb25zdCB7XG4gICAgICAgIG5leHRYT2Zmc2V0LFxuICAgICAgICBuZXh0WU9mZnNldCxcbiAgICAgICAgbmV4dFBhZ2UsXG4gICAgICAgIGxpbmVzXG4gICAgICB9ID0gdGhpcy5yZW5kZXJQYXJhZ3JhcGgoXG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgeE9mZnNldCxcbiAgICAgICAgeU9mZnNldCxcbiAgICAgICAgY3VycmVudFBhZ2UsXG4gICAgICAgIGluZGV4LFxuICAgICAgICBtYXhMaW5lc1BlclBhcmFncmFwaFxuICAgICAgKTtcbiAgICAgIHlPZmZzZXQgPSBuZXh0WU9mZnNldDtcbiAgICAgIHhPZmZzZXQgPSBuZXh0WE9mZnNldDtcbiAgICAgIGN1cnJlbnRQYWdlID0gbmV4dFBhZ2U7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsaW5lc1xuICAgICAgfTtcbiAgICB9KVxuICAgIC5maWx0ZXIoYSA9PiBhKTtcbn07XG5cbkpzUERGTWFrZS5wcm90b3R5cGUuZ2VuZXJhdGVGcm9tRG9jRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIGdlbmVyYXRlRnJvbURvY0RlZmluaXRpb24oKSB7XG4gIGNvbnN0IHsgZG9jRGVmaW5pdGlvbiB9ID0gdGhpcztcbiAgdGhpcy5jbGVhckRvYygpO1xuICB0aGlzLmluaXRUT0MoKTtcbiAgY29uc3QgcGFyYWdyYXBocyA9IHRoaXMudHJhbnNmb3JtQ29udGVudFRvRHJhd2FibGVQYXJhZ3JhcGhzKFxuICAgIGRvY0RlZmluaXRpb24uY29udGVudFxuICApOyAvLyBBcnJheSBvZiBQYXJhZ3JhcGggd2hlcmUgYSBQYXJhZ2FwaCBpcyBhbiBBcnJheSBvZiBMaW5lc1xuICBjb25zdCB7IHRvY1NlY3Rpb25zIH0gPSB0aGlzO1xuICBPYmplY3QuZW50cmllcyh0b2NTZWN0aW9ucykuZm9yRWFjaCgoW3RvY0lkLCB0b2NTZWN0aW9uXSkgPT4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLnRyYW5zZm9ybVRPQ1RvQ29udGVudCh0b2NTZWN0aW9uKTtcbiAgICBjb25zdCB0b2NQYXJhZ3JhcGhzID0gdGhpcy50cmFuc2Zvcm1Db250ZW50VG9EcmF3YWJsZVBhcmFncmFwaHMoY29udGVudCwgMSk7IC8vIHRyYW5zZm9ybSB0byBkcmF3YWJsZSBwYXJhZ3JhcGggd2l0aCBtYXggMSBsaW5lIHBlciBwYXJhZ3JhcGhcblxuICAgIC8vIE1lcmdlIHRvY1BhcmFncmFwaHMgaW50byB0aGUgY3VycmVudCBwYXJhZ3JhcGhzXG4gICAgcGFyYWdyYXBocy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuaXNUb2MgJiYgcC5pZCA9PT0gdG9jSWQpIHtcbiAgICAgICAgcC5saW5lcyA9IHRvY1BhcmFncmFwaHMubWFwKHAgPT4gcC5saW5lcykuZmxhdCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICB0aGlzLmRyYXdQYXJhZ3JhcGhzKHRoaXMudXBkYXRlVE9DTGlua3MocGFyYWdyYXBocykpO1xuICB0aGlzLnJlbmRlclN0YW1wVG9QYWdlcygpO1xufTtcblxuSnNQREZNYWtlLnByb3RvdHlwZS5yZW5kZXJTdGFtcFRvUGFnZXMgPSBmdW5jdGlvbiByZW5kZXJTdGFtcFRvUGFnZXMoKSB7XG4gIGNvbnN0IHsgZG9jRGVmaW5pdGlvbiwgZG9jLCB0b2NTZWN0aW9ucywgcGFnZVdpZHRoLCBwYWdlSGVpZ2h0IH0gPSB0aGlzO1xuICBsZXQgeyByZW5kZXJTdGFtcCwgcmVuZGVyRm9vdGVyIH0gPSBkb2NEZWZpbml0aW9uO1xuICBpZiAocmVuZGVyRm9vdGVyKSB7XG4gICAgY29uc29sZS53YXJuKCdEZXByaWNhdGVkIHVzYWdlIHJlbmRlckZvb3RlciwgdXNlIHJlbmRlclN0YW1wIGluc3RlYWQnKTtcbiAgICByZW5kZXJTdGFtcCA9IHJlbmRlckZvb3RlcjtcbiAgfVxuICBpZiAocmVuZGVyU3RhbXApIHtcbiAgICBsZXQgY3VycmVudFBhZ2VOdW1iZXIgPSAxO1xuICAgIHdoaWxlIChjdXJyZW50UGFnZU51bWJlciA8PSB0aGlzLnNpemUoKSkge1xuICAgICAgZG9jLnNldFBhZ2UoY3VycmVudFBhZ2VOdW1iZXIpO1xuICAgICAgcmVuZGVyU3RhbXAoXG4gICAgICAgIGRvYyxcbiAgICAgICAgY3VycmVudFBhZ2VOdW1iZXIsXG4gICAgICAgIHtcbiAgICAgICAgICB3aWR0aDogcGFnZVdpZHRoLFxuICAgICAgICAgIGhlaWdodDogcGFnZUhlaWdodFxuICAgICAgICB9LFxuICAgICAgICB0b2NTZWN0aW9uc1xuICAgICAgKTtcbiAgICAgIGN1cnJlbnRQYWdlTnVtYmVyICs9IDE7XG4gICAgfVxuICB9XG59O1xuXG5Kc1BERk1ha2UucHJvdG90eXBlLmRvd25sb2FkID0gZnVuY3Rpb24gZG93bmxvYWQoKSB7XG4gIHRoaXMuZG9jLnNhdmUodGhpcy50aXRsZSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kSnNQREZBUEkoY2IpIHtcbiAgY2IoSnNQREYuQVBJKTtcbn1cbiIsImV4cG9ydCBjb25zdCBERUZBVUxUX0ZPTlRfU0laRSA9IDE4O1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfTElORV9IRUlHSFQgPSAxO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQUxJR04gPSAnbGVmdCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9GT05UX05BTUUgPSAnaGVsdmV0aWNhJztcbmV4cG9ydCBjb25zdCBERUZBVUxUX0ZPTlRfU1RZTEUgPSAnbm9ybWFsJztcbmV4cG9ydCBjb25zdCBERUZBVUxUX1RFWFRfQ09MT1IgPSAnYmxhY2snO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIERFRkFVTFRfRk9OVF9TSVpFLFxuICBERUZBVUxUX0xJTkVfSEVJR0hULFxuICBERUZBVUxUX0FMSUdOLFxuICBERUZBVUxUX0ZPTlRfTkFNRSxcbiAgREVGQVVMVF9GT05UX1NUWUxFLFxuICBERUZBVUxUX1RFWFRfQ09MT1Jcbn07XG4iLCJleHBvcnQgY29uc3QgbWF4QnkgPSAoXG4gIGFycmF5ID0gW10sXG4gIGdldFZhbHVlID0gb2JqID0+IG9iaixcbiAgbWF4RnVuYyA9IE1hdGgubWF4XG4pID0+IHtcbiAgaWYgKGFycmF5ICYmIGFycmF5Lmxlbmd0aCkge1xuICAgIHJldHVybiBhcnJheS5yZWR1Y2UoXG4gICAgICAocHJldiwgY3VycmVudCkgPT4gbWF4RnVuYyhnZXRWYWx1ZShwcmV2KSwgZ2V0VmFsdWUoY3VycmVudCkpLFxuICAgICAgYXJyYXlbMF1cbiAgICApO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5TdHJpbmcucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuc3BsaXQoJycpXG4gICAgLnJldmVyc2UoKVxuICAgIC5qb2luKCcnKTtcbn07XG5cbmNvbnN0IEVQUyA9IDFlLTU7XG5cbmNvbnN0IGxlc3NUaGFuT3JFcXVhbCA9IChhLCBiKSA9PiB7XG4gIHJldHVybiBhIDwgYiB8fCBNYXRoLmFicyhhIC0gYikgPCBFUFM7XG59O1xuXG5jb25zdCByZW1vdmVDaGFyYWN0ZXJzVG9GaXRXaWR0aCA9IChcbiAgdGV4dCxcbiAgd2lkdGgsXG4gIG51bU9mRG90cyxcbiAgZ2V0VGV4dFdpZHRoLFxuICBzZXBlcmF0b3IgPSAnICdcbikgPT4ge1xuICBjb25zdCBwYWRkaW5nVGV4dCA9IEFycmF5KG51bU9mRG90cylcbiAgICAuZmlsbCgnLicpXG4gICAgLmpvaW4oJycpXG4gICAgLmNvbmNhdChzZXBlcmF0b3IpO1xuICBjb25zdCB0b3RhbFdpZHRoID0gd2lkdGggLSBnZXRUZXh0V2lkdGgocGFkZGluZ1RleHQpO1xuICBsZXQgblRleHQgPSAnJztcbiAgbGV0IGkgPSAwO1xuICB3aGlsZSAoXG4gICAgaSA8IHRleHQubGVuZ3RoICYmXG4gICAgbGVzc1RoYW5PckVxdWFsKFxuICAgICAgZ2V0VGV4dFdpZHRoKG5UZXh0LmNvbmNhdCh0ZXh0W2ldLCBwYWRkaW5nVGV4dCkpLFxuICAgICAgdG90YWxXaWR0aFxuICAgIClcbiAgKSB7XG4gICAgblRleHQgPSBuVGV4dC5jb25jYXQodGV4dFtpXSk7XG4gICAgaSArPSAxO1xuICB9XG4gIG5UZXh0ID0gblRleHQuY29uY2F0KHBhZGRpbmdUZXh0KTtcbiAgcmV0dXJuIG5UZXh0O1xufTtcblxuY29uc3QgYWRkRG90c1RvRml0V2lkdGggPSAodGV4dCwgd2lkdGgsIGdldFRleHRXaWR0aCwgc2VwZXJhdG9yID0gJyAgJykgPT4ge1xuICBsZXQgblRleHQgPSB0ZXh0O1xuICB3aGlsZSAobGVzc1RoYW5PckVxdWFsKGdldFRleHRXaWR0aChuVGV4dC5jb25jYXQoJy4nLCBzZXBlcmF0b3IpKSwgd2lkdGgpKSB7XG4gICAgblRleHQgPSBuVGV4dC5jb25jYXQoJy4nKTtcbiAgfVxuICByZXR1cm4gblRleHQuY29uY2F0KHNlcGVyYXRvcik7XG59O1xuXG4vKipcbiAqIFJldHVybnMgMiBsaW5lcyBjb25ubmVjdGVkIHdpdGggZG90cywgdGhlIGZpcnN0IGxpbmUgaXMgdGhlIGxpbmsgYW5kIHRoZSBzZWNvbmQgaXMgdGhlIHBhZ2UgbnVtYmVyXG4gKiBAcGFyYW0ge09iamVjdH0gbGluZSB0aGUgbGluZSB0byBhZGQgZG90cyB0b1xuICogQHBhcmFtIHtOdW1iZXJ9IG1pbkRvdHMgbWluaW11bSBudW1iZXIgb2YgZG90cyBiZXR3ZWVuIHRoZSB0d28gdGV4dHNcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZXBlcmF0b3IgdGV4dCB0byBzZXByYXRlIGJldHdlZW4gdGhlIHR3byB0ZXh0c1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZ2V0VGV4dFdpZHRoIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSB3aWR0aCBvZiBhIGdpdmVuIHRleHQgaW4gcGl4ZWxzXG4gKi9cbmV4cG9ydCBjb25zdCBjb25uZWN0V2l0aERvdHNUb0ZpdExpbmUgPSAobGluZSwgZ2V0VGV4dFdpZHRoKSA9PiB7XG4gIGNvbnN0IG1pblJpZ2h0VGV4dCA9IEFycmF5KDkpXG4gICAgLmZpbGwoJy4nKVxuICAgIC5qb2luKCcnKVxuICAgIC5jb25jYXQobGluZS5saW5rUGFnZSk7XG4gIGNvbnN0IHJpZ2h0VGV4dFdpZHRoID0gZ2V0VGV4dFdpZHRoKG1pblJpZ2h0VGV4dCk7XG4gIGNvbnN0IGxlZnRUZXh0V2lkdGggPSBnZXRUZXh0V2lkdGgobGluZS50ZXh0KTtcbiAgbGV0IGxlZnRUZXh0ID0gbGluZS50ZXh0O1xuICBsZXQgcmlnaHRUZXh0ID0gbWluUmlnaHRUZXh0O1xuICBpZiAobGluZS5saW5lV2lkdGggLSBsZWZ0VGV4dFdpZHRoIDwgcmlnaHRUZXh0V2lkdGgpIHtcbiAgICAvLyB0aGlzIG1lYW5zIHdlIG5lZWQgdG8gcmVtb3ZlIHNvbWUgY2hhcmFjdGVycyBmcm9tIHRoZSBsaW5lIHRleHQgdG8gbWFrZSBzcGFjZSBmb3IgdGhlIGRvdHMgYW5kIHRoZSBwYWdlTnVtYmVyXG4gICAgbGVmdFRleHQgPSByZW1vdmVDaGFyYWN0ZXJzVG9GaXRXaWR0aChcbiAgICAgIGxpbmUudGV4dCxcbiAgICAgIGxpbmUubGluZVdpZHRoIC0gcmlnaHRUZXh0V2lkdGgsXG4gICAgICAyLFxuICAgICAgZ2V0VGV4dFdpZHRoXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICByaWdodFRleHQgPSBhZGREb3RzVG9GaXRXaWR0aChcbiAgICAgIG1pblJpZ2h0VGV4dC5yZXZlcnNlKCksXG4gICAgICBsaW5lLmxpbmVXaWR0aCAtIGxlZnRUZXh0V2lkdGgsXG4gICAgICBnZXRUZXh0V2lkdGhcbiAgICApLnJldmVyc2UoKTtcbiAgfVxuICByZXR1cm4gW1xuICAgIHsgLi4ubGluZSwgdGV4dDogbGVmdFRleHQgfSxcbiAgICB7XG4gICAgICAuLi5saW5lLFxuICAgICAgdGV4dDogcmlnaHRUZXh0LFxuICAgICAgeE9mZnNldDogbGluZS54T2Zmc2V0ICsgbGluZS5saW5lV2lkdGggLSBnZXRUZXh0V2lkdGgocmlnaHRUZXh0KVxuICAgIH1cbiAgXTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbWF4Qnlcbn07XG4iLCJpbXBvcnQgeyBKc1BERk1ha2UgfSBmcm9tICcuL2luZGV4JztcbmltcG9ydCB7IGNvbm5lY3RXaXRoRG90c1RvRml0TGluZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5Kc1BERk1ha2UucHJvdG90eXBlLmluaXRUT0MgPSBmdW5jdGlvbiBpbml0VE9DKCkge1xuICB0aGlzLnRvY1NlY3Rpb25zID0ge307XG4gIHRoaXMuZG9jRGVmaW5pdGlvbi5jb250ZW50XG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udG9jKVxuICAgIC5mb3JFYWNoKCh7IHRvYyB9KSA9PiB7XG4gICAgICBpZiAodGhpcy50b2NTZWN0aW9uc1t0b2MuaWRdKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgRHVwbGljYXRlIHRhYmxlIG9mIGNvbnRlbnRzIGlkICcke1xuICAgICAgICAgICAgdG9jLmlkXG4gICAgICAgICAgfScsIHBsZWFzZSBtYWtlIHN1cmUgYWxsIHRhYmxlIG9mIGNvbnRlbnRzIGhhdmUgYSB1bmlxIGlkYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRvYyk7IC8vIGRlZXAgY2xvbmUgdG9jXG4gICAgICBkZWxldGUgb3B0aW9ucy5pZDtcbiAgICAgIHRoaXMudG9jU2VjdGlvbnNbdG9jLmlkXSA9IHtcbiAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgICBvcHRpb25zXG4gICAgICB9O1xuICAgIH0pO1xufTtcblxuSnNQREZNYWtlLnByb3RvdHlwZS50cmFuc2Zvcm1UT0NUb0NvbnRlbnQgPSBmdW5jdGlvbiB0cmFuc2Zvcm1UT0NUb0NvbnRlbnQoXG4gIHNlY3Rpb25cbikge1xuICBjb25zdCB7IG9wdGlvbnMsIGl0ZW1zIH0gPSBzZWN0aW9uO1xuICBjb25zdCBjb250ZW50ID0gW29wdGlvbnMudGl0bGVdO1xuICBpdGVtcy5mb3JFYWNoKCh7IHRpdGxlLCBwYXJhZ3JhcGhJbmRleCB9KSA9PiB7XG4gICAgY29uc3QgdG9jSXRlbSA9IE9iamVjdC5hc3NpZ24oXG4gICAgICB7IHRleHQ6IHRpdGxlLCBpc0xpbms6IHRydWUsIGxpbmtQYXJhZ3JhcGhJbmRleDogcGFyYWdyYXBoSW5kZXggfSxcbiAgICAgIG9wdGlvbnMuaXRlbU9wdGlvbnNcbiAgICApO1xuICAgIGNvbnRlbnQucHVzaCh0b2NJdGVtKTtcbiAgfSk7XG4gIHJldHVybiBjb250ZW50O1xufTtcblxuSnNQREZNYWtlLnByb3RvdHlwZS51cGRhdGVUT0NMaW5rcyA9IGZ1bmN0aW9uIHVwZGF0ZVRPQ0xpbmtzKHBhcmFncmFwaHMpIHtcbiAgbGV0IHRvY1BhcmFncmFwaHNTaXplID0gMDtcbiAgbGV0IGxhc3RQYWdlID0gMDtcblxuICAvLyBMb29wIG9uIGFsbCBwYXJhZ3JhcGhzXG4gIHBhcmFncmFwaHMuZm9yRWFjaChwID0+IHtcbiAgICBsZXQgcGFyYWdyYXBoU2l6ZSA9IDA7XG4gICAgaWYgKHAuaXNUb2MpIHtcbiAgICAgIC8vIElmIHRoZSBjdXJyZW50IHBhcmFncmFwaCBpcyBhIHRhYmxlIG9mIGNvbnRlbnRzIHVwZGF0ZSBpdCdzIHBhZ2UgbnVtYmVyIHRvIGJlIGFmdGVyIGxhc3QgcGFnZVxuICAgICAgcC5saW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgICBwYXJhZ3JhcGhTaXplID0gbGluZS5wYWdlTnVtYmVyO1xuICAgICAgICBsaW5lLnBhZ2VOdW1iZXIgKz0gbGFzdFBhZ2U7XG4gICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgIC8vIGFzc2lnbiB0aGUgcGFnZSBudW1iZXIgb2YgdGhlIHRvYyBzZWN0aW9uIHRvIGl0J3MgZmlyc3QgbGluZSBwYWdlIG51bWJlclxuICAgICAgICAgIHRoaXMudG9jU2VjdGlvbnNbcC5pZF0ucGFnZU51bWJlciA9IGxpbmUucGFnZU51bWJlcjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyBJbmNyZWFzZSB0aGUgc2l6ZSBvZiB0aGUgdGFibGUgb2YgY29udGVudHMgcGFyYWdyYXBoIGJ5IHRoaXMgdG9jIHNpemVcbiAgICAgIHRvY1BhcmFncmFwaHNTaXplICs9IHBhcmFncmFwaFNpemU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIGl0J3MgYSBub3JtYWwgcGFyYWdyYXBoIHRoZW4gaW5jcmVhc2UgaXQncyBwYWdlIG51bWJlciB3aXRoIHRoZSB0b2NQYXJhZ3JhcGhTaXplIHRvIHNoaWZ0IGl0IGRvd25cbiAgICAgIHAubGluZXMuZm9yRWFjaChsaW5lID0+IHtcbiAgICAgICAgbGluZS5wYWdlTnVtYmVyICs9IHRvY1BhcmFncmFwaHNTaXplO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGxhc3QgcGFnZVxuICAgICAgICBsYXN0UGFnZSA9IGxpbmUucGFnZU51bWJlcjtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gTGluayBhbGwgbGlua2VkIGxpbmVzIHRvIHRoZSBjb3JyZWN0IHBhcmFncmFwaCdzIGZpcnN0IGxpbmVcbiAgcGFyYWdyYXBocy5mb3JFYWNoKHAgPT4ge1xuICAgIHAubGluZXMgPSBwLmxpbmVzLnJlZHVjZSgobkxpbmVzLCBsaW5lKSA9PiB7XG4gICAgICBpZiAobGluZS5saW5rUGFyYWdyYXBoSW5kZXggPj0gMCkge1xuICAgICAgICAvLyAyIGxpbmVzIGNvbm5uZWN0ZWQgd2l0aCBkb3RzIHRoZSBmaXJzdCBsaW5lIGlzIHRoZSBsaW5rLCB0aGUgc2Vjb25kIGlzIHRoZSBwYWdlIG51bWJlclxuICAgICAgICBjb25zdCBkb3RDb25uZWN0TGluZXMgPSBjb25uZWN0V2l0aERvdHNUb0ZpdExpbmUoXG4gICAgICAgICAge1xuICAgICAgICAgICAgLi4ubGluZSxcbiAgICAgICAgICAgIGxpbmtQYWdlOiBwYXJhZ3JhcGhzW2xpbmUubGlua1BhcmFncmFwaEluZGV4XS5saW5lc1swXS5wYWdlTnVtYmVyXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0ZXh0ID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY1xuICAgICAgICAgICAgICAuc2V0Rm9udChsaW5lLmZvbnROYW1lLCBsaW5lLmZvbnRTdHlsZSlcbiAgICAgICAgICAgICAgLnNldEZvbnRTaXplKGxpbmUuZm9udFNpemUpXG4gICAgICAgICAgICAgIC5nZXRUZXh0V2lkdGgodGV4dCk7XG4gICAgICAgICAgfSAvLyBzZW5kIHRoZSBnZXQgdGV4dCB3aWR0aCBmdW5jdGlvbiBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgbGluZSdzIGZvbnQgc3BlY3NcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIG5MaW5lcy5jb25jYXQoZG90Q29ubmVjdExpbmVzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuTGluZXMuY29uY2F0KGxpbmUpO1xuICAgIH0sIFtdKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHBhcmFncmFwaHM7XG59O1xuIl0sIm5hbWVzIjpbIkpzUERGTWFrZSIsInRpdGxlIiwiZG9jRGVmaW5pdGlvbiIsIm9wdGlvbnMiLCJqc1BkZk9wdGlvbnMiLCJERUZBVUxUX0xJTkVfSEVJR0hUIiwiZG9jIiwiSnNQREYiLCJzZXRQcm9wZXJ0aWVzIiwicGFnZVdpZHRoIiwidGhpcyIsImludGVybmFsIiwicGFnZVNpemUiLCJnZXRXaWR0aCIsInBhZ2VIZWlnaHQiLCJnZXRIZWlnaHQiLCJwYWdlTWFyZ2luTGVmdCIsInBhZ2VNYXJnaW5SaWdodCIsInBhZ2VNYXJnaW5Ub3AiLCJwYWdlTWFyZ2luQm90dG9tIiwibWF4TGluZVdpZHRoIiwidG9jU2VjdGlvbnMiLCJnZW5lcmF0ZUZyb21Eb2NEZWZpbml0aW9uIiwiZXh0ZW5kSnNQREZBUEkiLCJjYiIsIkFQSSIsIkRFRkFVTFRfRk9OVF9TSVpFIiwiREVGQVVMVF9BTElHTiIsIkRFRkFVTFRfRk9OVF9OQU1FIiwiREVGQVVMVF9GT05UX1NUWUxFIiwiREVGQVVMVF9URVhUX0NPTE9SIiwiU3RyaW5nIiwicHJvdG90eXBlIiwicmV2ZXJzZSIsInNwbGl0Iiwiam9pbiIsIkVQUyIsImxlc3NUaGFuT3JFcXVhbCIsImEiLCJiIiwiTWF0aCIsImFicyIsInJlbW92ZUNoYXJhY3RlcnNUb0ZpdFdpZHRoIiwidGV4dCIsIndpZHRoIiwibnVtT2ZEb3RzIiwiZ2V0VGV4dFdpZHRoIiwic2VwZXJhdG9yIiwicGFkZGluZ1RleHQiLCJBcnJheSIsImZpbGwiLCJjb25jYXQiLCJ0b3RhbFdpZHRoIiwiblRleHQiLCJpIiwibGVuZ3RoIiwiYWRkRG90c1RvRml0V2lkdGgiLCJjb25uZWN0V2l0aERvdHNUb0ZpdExpbmUiLCJsaW5lIiwibWluUmlnaHRUZXh0IiwibGlua1BhZ2UiLCJyaWdodFRleHRXaWR0aCIsImxlZnRUZXh0V2lkdGgiLCJsZWZ0VGV4dCIsInJpZ2h0VGV4dCIsImxpbmVXaWR0aCIsInhPZmZzZXQiLCJpbml0VE9DIiwiY29udGVudCIsImZpbHRlciIsIml0ZW0iLCJ0b2MiLCJmb3JFYWNoIiwiX3RoaXMiLCJpZCIsIkVycm9yIiwiT2JqZWN0IiwiYXNzaWduIiwidHJhbnNmb3JtVE9DVG9Db250ZW50Iiwic2VjdGlvbiIsIml0ZW1zIiwicGFyYWdyYXBoSW5kZXgiLCJ0b2NJdGVtIiwiaXNMaW5rIiwibGlua1BhcmFncmFwaEluZGV4IiwiaXRlbU9wdGlvbnMiLCJwdXNoIiwidXBkYXRlVE9DTGlua3MiLCJwYXJhZ3JhcGhzIiwidG9jUGFyYWdyYXBoc1NpemUiLCJsYXN0UGFnZSIsInBhcmFncmFwaFNpemUiLCJwIiwiaXNUb2MiLCJsaW5lcyIsImluZGV4IiwicGFnZU51bWJlciIsInJlZHVjZSIsIm5MaW5lcyIsImRvdENvbm5lY3RMaW5lcyIsIl90aGlzMiIsInNldEZvbnQiLCJmb250TmFtZSIsImZvbnRTdHlsZSIsInNldEZvbnRTaXplIiwiZm9udFNpemUiLCJzaXplIiwicGFnZXMiLCJhZGRQYWdlIiwiY3VycmVudFBhZ2UiLCJnZXRDdXJyZW50UGFnZU51bWJlciIsImluc2VydFBhZ2UiLCJjbGVhckRvYyIsImRlbGV0ZVBhZ2UiLCJ1cGRhdGVEb2NEZWZpbml0aW9uIiwiZ2V0Q3VycmVudFBhZ2VJbmZvIiwiaXNDdXJzb3JPdXRPZlBhZ2VWZXJ0aWNhbGx5IiwieU9mZnNldCIsImRyYXdUZXh0SW5MaW5lIiwidGV4dENvbG9yIiwibWF4Rm9udFNpemUiLCJsaW5rVXJsIiwiaGFzQnVsbGV0IiwiYnVsbGV0U3BhY2luZyIsImhpZ2hsaWdodENvbG9yIiwiY2VudGVyIiwic2V0RHJhd0NvbG9yIiwic2V0RmlsbENvbG9yIiwicmVjdCIsInNldFBhZ2UiLCJzZXRUZXh0Q29sb3IiLCJsaW5rIiwidGV4dFdpdGhMaW5rIiwibWF4IiwiY2lyY2xlIiwiZHJhd1BhcmFncmFwaHMiLCJlc2NhcGVTcGVjaWFsQ2hhcmFjdGVycyIsInJlcGxhY2UiLCJyZW5kZXJQYXJhZ3JhcGgiLCJwYWdlQnJlYWsiLCJhbGlnbiIsIm1hcmdpblRvcCIsIm1hcmdpblJpZ2h0IiwibWFyZ2luQm90dG9tIiwibWFyZ2luTGVmdCIsInRvY0lkcyIsInRvY0l0ZW1UZXh0IiwibWF4TGluZXNQZXJQYXJhZ3JhcGgiLCJ3YXJuIiwidG9jSWQiLCJ0ZXh0TGluZXMiLCJzcGxpdFRleHRUb1NpemUiLCJzcGxpY2UiLCJ0cmFuc2Zvcm1Db250ZW50VG9EcmF3YWJsZVBhcmFncmFwaHMiLCJtYXAiLCJwYXJhbXMiLCJfdGhpczMiLCJuZXh0WE9mZnNldCIsIm5leHRZT2Zmc2V0IiwibmV4dFBhZ2UiLCJlbnRyaWVzIiwidG9jU2VjdGlvbiIsIl90aGlzNCIsInRvY1BhcmFncmFwaHMiLCJmbGF0IiwicmVuZGVyU3RhbXBUb1BhZ2VzIiwicmVuZGVyU3RhbXAiLCJyZW5kZXJGb290ZXIiLCJjdXJyZW50UGFnZU51bWJlciIsImRvd25sb2FkIiwic2F2ZSJdLCJtYXBwaW5ncyI6ImlHQVdPLFFBQVNBLFdBQVVDLEVBQU9DLE1BQWVDLGtFQUN6Q0QsY0FBZ0JBLEtBQ2ZFLGdCQUNTLFNBQ1AsWUFDRSw0QkFFSUMsMEJBRVRGLG9CQUFlQSxRQUNmRyxJQUFNLEdBQUlDLE9BQU1ILEdBQWNJLDhCQUc5QlAsTUFBUUEsT0FDUlEsVUFBWUMsS0FBS0osSUFBSUssU0FBU0MsU0FBU0MsZ0JBQ3ZDQyxXQUFhSixLQUFLSixJQUFJSyxTQUFTQyxTQUFTRyxpQkFDeENDLGVBQWlCYixFQUFRYSxnQkFBa0IsT0FDM0NDLGdCQUFrQmQsRUFBUWMsaUJBQW1CLE9BQzdDQyxjQUFnQmYsRUFBUWUsZUFBaUIsT0FDekNDLGlCQUFtQmhCLEVBQVFnQixrQkFBb0IsT0FDL0NDLGFBQ0hWLEtBQUtELFVBQVlDLEtBQUtNLGVBQWlCTixLQUFLTyxxQkFDekNJLG9CQUNBQyw0QkF3WVAsUUFBZ0JDLGdCQUFlQyxLQUMxQmpCLE1BQU1rQix3R0MzYUVDLGtCQUFvQixHQUNwQnJCLG9CQUFzQixFQUN0QnNCLGNBQWdCLE9BQ2hCQyxrQkFBb0IsWUFDcEJDLG1CQUFxQixTQUNyQkMsbUJBQXFCLG9tQkNTbENDLFFBQU9DLFVBQVVDLFFBQVUsaUJBQ2xCdkIsTUFBS3dCLE1BQU0sSUFDZkQsVUFDQUUsS0FBSyxJQUdWLElBQU1DLEtBQU0sS0FFTkMsZ0JBQWtCLFNBQUNDLEVBQUdDLFNBQ25CRCxHQUFJQyxHQUFLQyxL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
